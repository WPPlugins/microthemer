jQuery(document).ready(function(e){var t=TvrMT.TvrCom,r=TvrMT.MTF,a=TvrMT.mod.MTace;TvrMT.TvrUi={cssFilters:TvrMT.data.prog.CSSFilters,cssProps:TvrMT.data.prog.CSSProps,pref:TvrMT.data.dyn.pref,uiData:TvrMT.data.dyn.ui,sRules:CSSUtilities,reinitRules:!0,tmp:{},uiUrl:e("#ui-url").attr("rel"),pluginUrl:e("#plugin-url").attr("rel"),wpAjaxUrl:e("#wp_ajax_url").attr("rel"),adminUrl:e("#admin-url").attr("rel"),microUrl:e("#micro-url").attr("rel"),cssMin:e("#css-min").attr("rel"),cssStub:e("#css-stub").attr("rel"),totalSecs:parseInt(e("#total-sec-count").text()),TvrSugCSS:{},highlightEnabled:!1,colorPickerDragging:!1,progStatus:[],intelli:!1,awaitingIFrame:!0,compProps:{},intelliCompProps:{},nodeCSS:{},intellinodeCSS:{},mixedElKey:0,g_url:"",numSug:20,numMiniTiles:12,numSavedTiles:56,numSiteTiles:56,stat:{win:window,doc:document,body:e("body"),tvr:e("#tvr"),vis:e("#visual-view"),nav:e("#tvr-nav"),top:e("#v-top-controls"),code:e("#hand-css-area"),view:e("#display-css-code-dialog"),res:e("#responsive-bar"),slider:e("#v-mq-slider"),opts:e("#tvr-options"),front:e("#v-frontend-wrap"),wiz:e("#advanced-wizard"),breadcrumbs:e("#full-breadcrumbs"),actStyles:e("#actual-styles"),tools:e("#v-left-controls-wrap"),iframe:e("#viframe"),iframeDoc:!1,dialogs:e("#dialogs")},tOut:3e4,hi:{section:"folder-icon tvr-icon",selector:"selector-icon tvr-icon",tab:"edit-media-queries lg-icon"},baseFontSize:parseInt(e("html").css("font-size")),browser:e("#user-browser").attr("rel"),meta:{},inputWaitingObj:{},timer:{typing:0,quickTarget:0,deferredTarget:0,prog:[]},jumpTo:!1,something_wrong:!1,debugCount:0,wasOpen:!1,leftMenu:!!e("#v-left-controls").hasClass("show"),placeholderFrame:!0,dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:e("#wpAjaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,prev:!1,fullWidth:e("body").width(),resSliderWidth:0,tabsWidth:0,sortableMenuDims:{},iframe_slider_set:!1,mqs:[],allDevicesWidth:t.hasValue(e("#all_devices_default_width").attr("rel"))?e("#all_devices_default_width").attr("rel").replace("px",""):e("body").width(),totalSels:parseInt(e("#total-sel-count").text()),trial:"1"!=e("#plugin-trial").attr("rel"),trialNotice:TvrLang.trial_notice,gFontTarget:Object(),startSel:!1,selsToLoad:0,totalToLoad:0,pgInFocusWiz:"font",doneTypingInterval:1200,saveInProgress:!1,reSave:!1,siteUrl:e("#site-url").attr("rel"),itemAlreadyExpanded:!1,tooltipDelay:e("#tooltip_delay").attr("rel").toLowerCase(),edgeMode:e("#edge-mode").attr("rel"),init:function(){TvrMT.init.add_listeners()},adjust_mqs_for_unit:function(e){t.startT(arguments);var r=["min","max"];for(var a in e)for(var n=0;n<r.length;++n){var i=r[n];e[a][i]=parseFloat(e[a][i]),e[a][i+"_unit"]&&"px"!=e[a][i+"_unit"]&&(e[a][i]=parseFloat(e[a][i])*s.baseFontSize)}return t.endT(arguments),e},get_pseudo_config:function(t){var r={};for(var a in t)r[t[a]]={};var n=["page_specific","pseudo_elements","pseudo_classes"];for(var i in n){var o=n[i];for(var l in s.cssFilters[o].items){var c=l.replace("::",":");if(r[l]||r[c]){var d=r[c]?c:l;r[d]=e.extend(!0,{},s.cssFilters[o].items[l]),r[d].pCE=l}}}return r},psuedo_is_set:function(){var e=s.stat.tvr.attr("class"),t=["pseudo_classes","page_specific","pseudo_elements"];for(var r in t)if(e.indexOf(t[r])>-1)return!0;return!1},pseudo_class_format:function(e){return"filter-"+e.replace(/[:\(\)]+/g,"")},get_pseudo:function(t,r){if("val"==t){var a=s.pseudo_class_format(r.pseudoCE),n=e("#css-filters").find("span.quick-opts-wrap").find("ul.css-filter-list"),i=n.find("li."+a).find("input").val();return i}},iframe_loaded:function(e){t.startT(arguments),r=window.TvrMT.MTF,s.stat.fHTML=e,s.stat.iframeDoc=window.frames.viframe,t.endT(arguments)},setup_keyboard_shortcuts:function(r){t.startT(arguments),function(e,t,r){function a(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)}function s(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return u[e.which]?u[e.which]:_[e.which]?_[e.which]:String.fromCharCode(e.which).toLowerCase()}function n(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function i(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function o(e,t){var r,a,s,n=[];for(r=e,"+"===r?r=["+"]:(r=r.replace(/\+{2}/g,"+plus"),r=r.split("+")),s=0;s<r.length;++s)a=r[s],f[a]&&(a=f[a]),t&&"keypress"!=t&&p[a]&&(a=p[a],n.push("shift")),i(a)&&n.push(a);if(r=a,s=t,!s){if(!d){d={};for(var o in u)95<o&&112>o||u.hasOwnProperty(o)&&(d[u[o]]=o)}s=d[r]?"keydown":"keypress"}return"keypress"==s&&n.length&&(s="keydown"),{key:a,modifiers:n,action:s}}function l(e,r){return null!==e&&e!==t&&(e===r||l(e.parentNode,r))}function c(e){function r(e){e=e||{};var t,r=!1;for(t in m)e[t]?r=!0:m[t]=0;r||(T=!1)}function l(e,t,r,a,s,n){var o,l,c=[],d=r.type;if(!f._callbacks[e])return[];for("keyup"==d&&i(e)&&(t=[e]),o=0;o<f._callbacks[e].length;++o)if(l=f._callbacks[e][o],(a||!l.seq||m[l.seq]==l.level)&&d==l.action){var u;(u="keypress"==d&&!r.metaKey&&!r.ctrlKey)||(u=l.modifiers,u=t.sort().join(",")===u.sort().join(",")),u&&(u=a&&l.seq==a&&l.level==n,(!a&&l.combo==s||u)&&f._callbacks[e].splice(o,1),c.push(l))}return c}function d(e,t,r,a){f.stopCallback(t,t.target||t.srcElement,r,a)||!1!==e(t,r)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function u(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=s(e);t&&("keyup"==e.type&&v===t?v=!1:f.handleKey(t,n(e),e))}function _(e,t,a,n){function i(t){return function(){T=t,++m[e],clearTimeout(g),g=setTimeout(r,1e3)}}function l(t){d(a,t,e),"keyup"!==n&&(v=s(t)),setTimeout(r,10)}for(var c=m[e]=0;c<t.length;++c){var u=c+1===t.length?l:i(n||o(t[c+1]).action);p(t[c],u,n,e,c)}}function p(e,t,r,a,s){f._directMap[e+":"+r]=t,e=e.replace(/\s+/g," ");var n=e.split(" ");1<n.length?_(e,n,t,r):(r=o(e,r),f._callbacks[r.key]=f._callbacks[r.key]||[],l(r.key,r.modifiers,{type:r.action},a,e,s),f._callbacks[r.key][a?"unshift":"push"]({callback:t,modifiers:r.modifiers,action:r.action,seq:a,level:s,combo:e}))}var f=this;if(e=e||t,!(f instanceof c))return new c(e);f.target=e,f._callbacks={},f._directMap={};var g,m={},v=!1,h=!1,T=!1;f._handleKey=function(e,t,a){var s,n=l(e,t,a);t={};var o=0,c=!1;for(s=0;s<n.length;++s)n[s].seq&&(o=Math.max(o,n[s].level));for(s=0;s<n.length;++s)n[s].seq?n[s].level==o&&(c=!0,t[n[s].seq]=1,d(n[s].callback,a,n[s].combo,n[s].seq)):c||d(n[s].callback,a,n[s].combo);n="keypress"==a.type&&h,a.type!=T||i(e)||n||r(t),h=c&&"keydown"==a.type},f._bindMultiple=function(e,t,r){for(var a=0;a<e.length;++a)p(e[a],t,r)},a(e,"keypress",u),a(e,"keydown",u),a(e,"keyup",u)}if(e){var d,u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},_={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},p={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},f={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(r=1;20>r;++r)u[111+r]="f"+r;for(r=0;9>=r;++r)u[r+96]=r;c.prototype.bind=function(e,t,r){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,r),this},c.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},c.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},c.prototype.reset=function(){return this._callbacks={},this._directMap={},this},c.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" tvr-mousetrap ")||l(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},c.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},c.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(u[t]=e[t]);d=null},c.init=function(){var e,r=c(t);for(e in r)"_"!==e.charAt(0)&&(c[e]=function(e){return function(){return r[e].apply(r,arguments)}}(e))},c.init(),e.TvrMousetrap=c,"undefined"!=typeof module&&module.exports&&(module.exports=c),"function"==typeof define&&define.amd&&define(function(){return c})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?r:null),function(e){var t={},r=e.prototype.stopCallback;e.prototype.stopCallback=function(e,a,s,n){return!!this.paused||!t[s]&&!t[n]&&r.call(this,e,a,s)},e.prototype.bindGlobal=function(e,r,a){if(this.bind(e,r,a),e instanceof Array)for(r=0;r<e.length;r++)t[e[r]]=!0;else t[e]=!0},e.init()}(TvrMousetrap),TvrMousetrap.bindGlobal(["command+s","ctrl+s"],function(r){s.ua_detected();var n;if(!e("#toggle-full-code-editor").hasClass("on")&&s.selInFocusID){var i="#ed-"+s.selInFocusID+"-code-custom_css-css-"+s.get_mq_focus();if(i+=".ace_focus",n=e(i),t.isDomEl(n))return s.ajax_save_settings("",n.prev("textarea")),event.preventDefault(),!1}var o={items:[TvrLang.settings_saved],val:TvrLang.keyboard_shortcut,icon:"save-interface lg-icon"};return e("#toggle-full-code-editor").hasClass("on")&&(n=s.stat.code.find("pre.ace_focus"),t.isDomEl(n)&&(o.items=[TvrLang.custom_code],o.val=a.editor_line(a.get_editor(n)))),s.user_action(o),s.ajax_save_settings(),r.preventDefault(),!1}),TvrMousetrap.bindGlobal(["command+alt+h","ctrl+alt+h"],function(e){return s.keyboard_highlight||s.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"reg"}),s.keyboard_highlight=1,!1},"keydown"),TvrMousetrap.bindGlobal(["command+alt+t","ctrl+alt+t"],function(e){return s.toggle_feature(!1,"hover_inspect",{noSave:1}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+c","ctrl+alt+c"],function(e){return s.toggle_feature(!1,"show_code_editor"),!1},"keypress"),t.startT("init keydown event"),e(r).keydown(function(r){if(t.hasValue(e(r.target))&&e(r.target).attr("class")&&e(r.target).attr("class").indexOf("strictly-dropdown")>-1)return r.preventDefault(),!1}),t.endT("init keydown event"),e(r).keyup(function(e){if(72==e.keyCode&&s.keyboard_highlight)return e.preventDefault(),s.feature_off(0,"mt_highlight",{fHTML:1,noSave:1,onAgain:s.el_selected?{fHTML:1,noSave:1,con:"intelli"}:0}),s.keyboard_highlight=0,!1}),t.endT(arguments)},expanded:function(r){t.startT(arguments);var a;if("main_menu"==r)a=e("#tvr-main-menu");else if("quick_section"==r)a=e("#sec-in-focus");else if("quick_selector"==r)a=e("#sel-in-focus");else if("show_css_filters"==r)a=e("#show_css_filters-toggle");else if("mq"==r){var n=e("#"+s.selInFocusID);if(!t.isDomEl(n))return!1;a=n.find("span.add-mq")}return t.endT(arguments),!!a.hasClass("on")},show_main_menu:function(e){return t.startT(arguments),!s.itemAlreadyExpanded&&(s.set_popdown_height(".menu-scrollable"),e.addClass("on expanded"),s.stat.vis.addClass("top_menu_showing"),void t.endT(arguments))},set_popdown_height:function(r){t.startT(arguments);var a=s.stat.vis.height()-40,n=".menu-scrollable"==r?34:0;e("#main-menu-popdown").css("max-height",a).find(r).css("max-height",a-n),t.endT(arguments)},hide_main_menu:function(){t.startT(arguments),s.clean_tooltips(),e("#tvr-main-menu").removeClass("on expanded"),s.stat.vis.removeClass("top_menu_showing"),t.endT(arguments)},quick_edit:function(r){if(t.startT(arguments),s.itemAlreadyExpanded)return!1;var a=s.get_meta(e("#"+s.selInFocusID),"selector");e("#main-menu-popdown").addClass("bye-for-now"),a.sectionM.addClass("hello-me");var n=a.sectionM.find(".menu-arrow"),i=a.selectorM.find(".edit-selector-form");if(n.hasClass("on")||s.toggle_folder(n),r.hasClass("sec-in-focus")){var o=a.sectionM;i.hasClass("show")&&s.toggle_modify_selector(i),a.sectionM.find(".folder-icon").removeClass("sortable-icon").attr("title",""),s.set_popdown_height(".section-tag.hello-me")}else{var o=a.selectorM;i.hasClass("show")||s.toggle_modify_selector(i),a.sectionM.addClass("goodbye-section"),a.selectorM.addClass("hello-me"),s.set_popdown_height(".selector-tag.hello-me")}o.addClass("quick-edit-mode scrollable-area-not-live expanded"),r.addClass("on"),s.stat.vis.addClass("top_menu_showing"),t.endT(arguments)},close_quick_edit:function(){t.startT(arguments),s.clean_tooltips();var r=e("#main-menu-popdown"),a=r.find(".quick-edit-mode");if(a.hasClass("section-tag")){var n="folder",i=s.get_meta(a,"section"),o=i.sectionM,l=a.find("."+n+"-icon");l.addClass("sortable-icon").attr("title",l.data("title"))}else{var n="selector",i=s.get_meta(a,"selector"),c=i.selectorM.find(".edit-selector-form");c.hasClass("show")&&c.removeClass("show");var o=i.sectionM.add(i.selectorM)}a.removeClass("quick-edit-mode scrollable-area-not-live expanded");var d=i.sectionM.find(".menu-arrow");d.hasClass("on")&&s.toggle_folder(d),e("#current-selector").find(".on").removeClass("on"),o.removeClass("hello-me goodbye-section").css("max-height",""),r.removeClass("bye-for-now"),s.stat.vis.removeClass("top_menu_showing"),t.endT(arguments)},close_all_expanded:function(r,a,n){if(t.startT(arguments),!n){var i=r.parent();if(r.hasClass("on")||i.hasClass("quick-edit-wrap")&&i.hasClass("on")?s.itemAlreadyExpanded=!0:s.itemAlreadyExpanded=!1,(t.isDomEl(r.closest(".expanded"))||t.isDomEl(r.closest(".sp-container")))&&!r.hasClass("change-selector"))return t.endT(arguments),!1;if(r.hasClass("ui-menu-item")&&r.closest("#refine-targeting-pane")&&e("#show_css_filters-toggle").hasClass("on"))return!1}s.expanded("main_menu")?s.hide_main_menu():s.expanded("quick_section")||s.expanded("quick_selector")?s.close_quick_edit():s.expanded("show_css_filters")&&s.input_icon_toggle(e("#show_css_filters-toggle")),s.colorPickerDragging||s.picker_method("hide"),t.endT(arguments)},close_tooltip:function(e,t){e.attr("title",t.text()).removeAttr("aria-describedby"),t.remove()},clean_tooltips:function(){if(t.startT(arguments),"native"==s.tooltipDelay)return!1;if("native"!=s.tooltipDelay){var r=s.stat.body.data("ui-tooltip");if(t.hasValue(r)){for(var a in r.tooltips){var n=e(r.tooltips[a].element[0]),i=e(r.tooltips[a].tooltip[0]);s.close_tooltip(n,i)}s.tt=!1,s.tt_trigger={}}}t.endT(arguments)},reset_global_vars:function(){t.startT(arguments),s.selInFocusID="",s.curSelCSS="#no-element",s.intelli_css="#no-element",s.pgInFocus="",s.compPgInFocus="",t.endT(arguments)},update_global_vars:function(r){t.startT(arguments),s.selInFocusID=r.selectorID,s.curSelCSS=t.custom_escape_quotes(r.selectorM.find(".selector-css-textarea").val()),e("#last-edited-selector").val(s.selInFocusID),e.get(s.ajaxUrl+"&last_viewed_selector="+s.selInFocusID,function(){});var a=e("#current-selector"),n="",i="";s.is_dis(r.sectionM)&&(n+="item-disabled"),s.is_dis(r.selectorM)&&(i+="item-disabled"),e("#sec-in-focus").hasClass("on")&&(n+=" on"),e("#sel-in-focus").hasClass("on")&&(i+=" on");var o="",l={sec:TvrLang.qedit_current_folder,sel:TvrLang.qedit_current_selector};for(var c in l){var d=l[c],u="sec"==c?r.sectionH:r.selectorH;o+='<span id="'+c+'-in-focus" class="'+c+'-in-focus quick-edit-wrap" >',o+='<span class="menu-arrow '+c+'-in-focus tvr-icon"></span>',o+='<span class="quick-menu-text '+c+'-in-focus" ',o+='title="'+d+'">'+u+"</span>",o+="</span>"}a.html(o);var _=TvrLang.update_selector+":\n"+r.sectionH+" >> "+r.selectorH+"\n";e("#wizard-update-cur").attr("title",_),t.endT(arguments)},menu_object:function(t){return e("#"+t.replace("opts","strk"))},section_slug:function(t){var r=s.get_meta(e("#"+t),"selector");return r.sectionSlug},is_cur:function(e,r){if(t.startT(arguments),"sec"==e){if(r==s.section_slug(s.selInFocusID))return!0}else if("sel"==e&&r==s.selInFocusID)return!0;return t.endT(arguments),!1},is_dis:function(e){return!!e.hasClass("item-disabled")},allowed_action:function(e,r){t.startT(arguments);var a=!1;if(!s.trial)return t.endT(arguments),!0;if("Edit Sel"==r&&t.isDomEl(e.closest(".trial-disabled")))var a=!0;if("Add Sel"==r&&s.totalSels>=15)var a=!0;return t.endT(arguments),!a||(alert(s.trialNotice),!1)},load_css_ref:function(e){t.startT(arguments),s.show_dialog(e),t.endT(arguments)},show_google_fonts:function(r){t.startT(arguments),r.show("fast"),e.colorbox({href:e("#fonts-api").attr("rel"),innerHeight:"80%",innerWidth:"95%",fixed:!0,iframe:!0,open:!0}),t.endT(arguments)},hide_google_fonts:function(e,r){t.startT(arguments),s.gFontTarget.val("").prop("val",""),r.hide(),t.endT(arguments)},insert_google_font:function(r){t.startT(arguments),e.colorbox.close(),s.gFontTarget.val(r).focus(),s.post_edit(s.gFontTarget),s.ajax_save_settings("",s.gFontTarget),t.endT(arguments)},launch_img_uploader:function(e){wp.media.editor.send.attachment=function(t,r){s.update_bg_image(e,r.url)},wp.media.editor.open("wpMediaFakePostID")},update_bg_image:function(e,r){t.startT(arguments);var a=s.get_meta(e,"property");a.property.find(".image-url-store").val(r),a.property.find(".img_display").val(t.basename(r)),s.ajax_save_settings("",a.property.find(".img_display")),t.basename(r),s.adjust_comp_span(a.property.find(".img_display"),"after"),t.endT(arguments)},clear_bg_image:function(e){t.startT(arguments),s.update_bg_image(e,""),t.endT(arguments)},check_feathers_after_prop_change:function(e){t.startT(arguments),s.section_check_values(e.section,!0,!0,!1,!1),s.tab_check_values(e.selector,s.get_mq_focus(),!0,!0),t.endT(arguments)},input_icon_toggle:function(r,a){t.startT(arguments);var n,i,o=r,l=r.attr("data-input-type"),c=r.attr("data-input-level"),d=s.title(r),u=l+"-tracker",_="disabled"==l&&"tab"==c?r.closest(".mq-tab").attr("rel"):s.get_mq_focus(),p="tvr_mcth",f="";if("all-devices"!=_&&(p+="[non_section][m_query]["+_+"]",f="[m_query]["+_+"]"),"important"==l)n=s.get_meta(r,"property"),i="tvr_mcth[non_section][important]"+f+"["+n.sectionSlug+"]["+n.selectorSlug+"]["+n.groupSlug+"]["+n.propertySlug+"]";else if("pie"==l)n=s.get_meta(r,"selector"),i=n.selectorM.find("input.register-selector").attr("name")+"["+l+"]";else if("ui"==c)i="tvr_preferences[enq_js]["+t.convert_to_param(g.find(".script-name").text())+"][disabled]";else if("disabled"==l){var g;n="tab"==c?s.get_meta(e("#"+s.selInFocusID),"selector"):s.get_meta(r,c),"section"==c?(g=s.disabled_quick_edit(n.sectionM,c,n),i=g.find("input.section-display-name").attr("name").replace("[label]","["+l+"]")):"selector"==c?(g=s.disabled_quick_edit(n.selectorM,c,n),i=g.find("input.register-selector").attr("name")+"["+l+"]"):"tab"==c?(g=r.closest(".mq-tab"),u+="-"+_,i=p+"["+n.sectionSlug+"]["+n.selectorSlug+"][tab]["+l+"]",o=n.selectorM.find("span.edit-selector")):"subgroup"==c?(g=r.closest("span.quick-opts-wrap"),i=p+"["+n.sectionSlug+"]["+n.selectorSlug+"][pg_"+l+"]["+n.subgroupSlug+"]"):"script"==c&&(g=r.closest("div.item-row"),i="tvr_preferences[enq_js]["+t.convert_to_param(g.find(".script-name").text())+"][disabled]")}else"chained"==l&&(n=s.get_meta(r,"subgroup"),i=p+"["+n.sectionSlug+"]["+n.selectorSlug+"][pg_"+l+"]["+n.subgroupSlug+"]");if(r.hasClass("active")){r.removeClass("active");var m="remove",v=r.attr("data-pos");o.siblings("."+u).remove(),"disabled"==l&&g.removeClass("item-disabled"),"show_css_filters"==c&&r.removeClass("on expanded")}else{var h='<input class="'+u+'" type="hidden" name="'+i+'" value="1" />';r.addClass("active");var m="add",v=r.attr("data-neg");o.before(h),"disabled"==l&&g.addClass("item-disabled"),"show_css_filters"==c&&r.addClass("on expanded")}if(s.refresh_tt(r,v),"script"==c||"ui"==c)return!1;var T=s.h_i_class(c,n),b=r.attr("class"),y=!1,w=!1,x=!1;"important"==l&&(b+=" lg-icon",x="i",w=y=!!s.chain_is_on(n)&&n.subgroupH+" "+TvrLang.fields_sync,w&&!a&&s.sync_important(n,m)),a||"show_css_filters"==c||(s.user_action({items:[c],val:d,valTT:y,M:n,pathTT:"section"!=c,icon:[{icon:T},{icon:b,iconC:x}]}),s.ajax_save_settings()),t.endT(arguments)},disabled_quick_edit:function(e,r,a){return t.startT(arguments),"section"==r&&s.is_cur("sec",a.sectionSlug)&&(e=e.add("#sec-in-focus")),"selector"==r&&s.is_cur("sel",a.selectorID)&&(e=e.add("#sel-in-focus")),t.endT(arguments),e},auto_clean:function(e,r){t.startT(arguments),t.endT(arguments)},icon:function(e){return""},title:function(e){var t=e.data("ui-tooltip-title");return t?t:e.attr("title")},crumb_str:function(e,r){t.startT(arguments);var a="",n="<span>",i="</span>",o=e.val;e.plainText&&(n=i="");for(var l in e.items){var c=e.items[l],d=e.M?e.M[c+"H"]:c,u="property"==c?"\n":"";if(d=u+n+d+i,a+=0!=l?n+"&nbsp;&raquo;&nbsp;"+i+d:d,c==r)break}var _=a;if(e.plainText||(_='<span class="his-items">'+a+"</span>"),o){var p=n,f="";e.plainText||(p='<span class="his-val">',e.valTT&&(f='<span class="info-icon tvr-icon" title="'+e.valTT+'"></span>'),e.M&&"code"!=e.M.groupSlug&&(o=s.colored_box(o,!0))),o=p+o+i+f;var g=n+"&nbsp;:&nbsp;"+i;_=e.valFirst?o+g+_:_+g+o}return t.endT(arguments),_},user_action:function(r){t.startT(arguments);var a=e.extend(!0,{},r);a.icon_html=a.pathTT_html="",a.target_depth=r.items[r.items.length-1],a.main_class=r.main_class?r.main_class:"";var n=r.M;if(a.targ_and_val=s.crumb_str(r,a.target_depth),r.pathTT&&(r.plainText=!0,r.M&&(r.items=["section","selector","tab","subgroup","property"]),a.pathTT_crumbs=s.crumb_str(r,a.target_depth),a.pathTT_html='title="'+a.pathTT_crumbs+'"',a.main_class+=" has-path-tt"),r.icon){if(n&&n.propertySlug){var i=n.property.attr("class").split(" ");for(var o in i)if(i[o].indexOf("icon-size")>-1){a.main_class+=" "+i[o];break}}"string"===e.type(r.icon)?a.icon_html=s.history_icon(r.icon,r.iconC,r.tt):a.icon_html+=s.history_icon(r.icon[1].icon,r.icon[1].iconC,r.icon[1].tt)}a.html='<span class="history-item history_'+t.convert_to_param(a.target_depth)+a.main_class+'"'+a.pathTT_html+">"+a.targ_and_val+"</span>",delete a.M,e("#user-action").text(JSON.stringify(a)),t.endT(arguments)},h_i_class:function(e,r){t.startT(arguments);var a=s.hi[e];return"subgroup"==e?a="lg-icon pg-icon-"+r.groupSlug:"property"==e&&(a=r.property.find("span.option-icon").attr("class").replace("tvr-icon","")),t.endT(arguments),a},history_icon:function(e,r,a){return t.startT(arguments),r=r?r:"",a=a?'title="'+a+'"':"",'<span class="h-i no-click '+e+'" '+a+">"+r+"</span>"},enable_tt:function(r){t.startT(arguments),r.tooltip({position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:!1,show:{effect:"none",duration:0,delay:s.tooltipDelay},open:function(r,a){t.startT(arguments);var n=s.get_tt(a),i=s.get_tt_trigger(r,this),o=(n.find(".ui-tooltip-content").html(),i.data("dyn-tt-root"));o&&n.html(e("#"+o).attr("title")),n.html(n.html().replace(/\n/g,"<br />")),t.endT(arguments)},close:function(e,t){s.tt=!1,s.tt_trigger={}}}),t.endT(arguments)},get_tt:function(e){return s.tt=e.tooltip},get_tt_trigger:function(r,a){return t.startT(arguments),s.tt_trigger=e(r.originalEvent.target||r.originalEvent.srcElement).closest(e(a).tooltip("option","items")),t.endT(arguments),s.tt_trigger},refresh_tt:function(r,a,n){t.startT(arguments),r.each(function(t){var r=e(this);"native"==s.tooltipDelay||!s.tt||n&&!r.is(n)?(r.attr("title",a),n&&n.data("dyn-tt-root")&&s.update_tt(s.tt,a)):s.update_tt(s.tt,a)}),t.endT(arguments)},update_tt:function(e,r){t.startT(arguments);var a=e.find(".ui-tooltip-content");a=t.isDomEl(a)?a:e,a.html(r.replace("\n","<br />")),s.tt_trigger.data("ui-tooltip-title",r),t.endT(arguments)},get_all_selector_code:function(){t.startT(arguments);var e={};for(var r in s.uiData)if("non_section"!=r&&s.uiData.hasOwnProperty(r))for(var a in s.uiData[r])if("this"!=a&&s.uiData[r][a]&&s.uiData[r].hasOwnProperty(a)){var n=s.uiData[r][a].label.split("|");e["strk-"+r+"-"+a]={fName:s.uiData[r]["this"].label,sName:n[0],code:n[1]}}return t.endT(arguments),e},get_meta:function(r,a){t.startT(arguments),s.meta={};var n=["stub","section","selector","group","subgroup","property"];for(var i in n)if(n[i]==a){if(r.attr("class")&&r.attr("class").indexOf(a+"-tag")>=0)var o=r;else var o=r.closest("."+a+"-tag");var l=o.attr("id"),c=l.split("-")}var d="";for(var u in c)if(0!=u&&6!=u&&7!=u){if(a=n[u],d+="-"+c[u],"property"==a||"subgroup"==a){var _=d,p="property"==a?_+"-"+c[6]:_+"-subgroup-"+c[6];"all"==c[6]&&(c[6]+="-devices",p+="-devices"),s.meta.tabSlug=c[6],s.meta[a]=e("#opts"+p)}else s.meta[a]=e("#opts"+d);if(s.meta[a+"Slug"]=c[u],"section"==a)s.meta[a+"M"]=e("#strk"+d),s.meta[a+"T"]=s.meta[a+"M"].find("input.section-tracker"),s.meta[a+"H"]=s.meta.sectionM.find(".section-display-name").val(),s.meta[a+"ID"]="opts-"+s.meta.sectionSlug,s.meta[a+"MID"]="strk-"+s.meta.sectionSlug;else if("selector"==a){s.meta[a+"M"]=e("#strk"+d);var f=s.meta.selectorM.find(".selector-label").val().split("|");s.meta[a+"T"]=s.meta[a+"M"].find("input.selector-tracker"),s.meta[a+"H"]=f[0],s.meta[a+"ID"]="opts-"+s.meta.sectionSlug+"-"+s.meta.selectorSlug,s.meta[a+"MID"]="strk-"+s.meta.sectionSlug+"-"+s.meta.selectorSlug}else"group"==a?s.meta[a+"ID"]="opts-"+s.meta.sectionSlug+"-"+s.meta.selectorSlug+"-"+s.meta.groupSlug:"subgroup"==a||"property"==a&&(s.meta.subgroupH=s.meta.subgroup.find("span.subgroup-label").text(),s.meta[a+"H"]=s.meta[a].find("span.option-label").text())}return s.meta.tabSlug||(s.meta.tabSlug=s.get_mq_focus()),s.meta.tabH=s.get_tab_name(s.meta.tabSlug),t.endT(arguments),s.meta},colorpicker_bind:function(r){t.startT(arguments),r.find("input.color:not(.bound)").spectrum({appendTo:"parent",showAlpha:!0,showInput:!1,allowEmpty:!0,showInitial:!0,preferredFormat:"rgb",showButtons:!1,showSelectionPalette:!0,localStorageKey:"shared_palette",maxSelectionSize:9,hide:function(e){s.$pickerContainer.draggable("destroy")},show:function(r){t.startT(arguments);var a=s.get_meta(e(this),"property"),n=s.inputWaitingObj=a.property.find("input.color"),i=a.property.find(".sp-container");s.$pickerContainer=i,s.$pickerContainer.draggable({});var o=parseInt(i.css("top").replace("px",""));if(!i.hasClass("extra-fields-added")){var l='<div class="sp-mt-inputs">';l+='<input type="number" min="0" max="1" step="0.1" class="sp-input-opacity sp-input">',l+='<input type="text" class="sp-input-rgb sp-input">',l+='<input type="text" class="sp-input-hsl sp-input">',l+='<input type="text" class="sp-input-hex sp-input">',l+="</div>",i.addClass("extra-fields-added").append(l).wrapInner("<div class='sp-wrap'>"),s.draw_palette(i),i.find(".sp-clear").bind("click.mt",function(e){s.clear_spectrum_inputs(a,!0)})}if(i.css("top",o+27),a.property.hasClass("manual-val"))s.update_spectrum_inputs(r,n,{},!0);else{var c=a.property.find("span.comp-style").find("span").attr("style");if(c){var d=c.split("background-color:");"transparent"!=d[1]&&"rgba(0, 0, 0, 0)"!=d[1]||(d[1]="rgba(0, 0, 0, 1)"),s.update_spectrum(d[1],n,{},!0)}}t.endT(arguments)},move:function(t){s.update_spectrum_inputs(t,e(this),{},!0),s.timer.typing&&clearTimeout(s.timer.typing),s.timer.typing=setTimeout(s.done_typing,200)}}).on("dragstart.spectrum",function(e,t){s.colorPickerDragging=!0}).on("dragstop.spectrum",function(e,t){s.colorPickerDragging=!1}).addClass("bound"),t.endT(arguments)},draw_palette:function(r){var a=s.get_meta(s.inputWaitingObj,"property");r=r?r:a.property.find(".sp-container");var n=r.find("ul.mt-picker-palette");t.isDomEl(n)?n.replaceWith(s.color_palette()):r.append(s.color_palette()),s.$palette=r.find("ul.mt-picker-palette"),r.find("ul.mt-picker-palette").on("click.mt-spectrum","span.full-palette-toggle, span.palette-button, span.refresh-icon, span.tile-color",function(t){var r=e(t.target),a=s.inputWaitingObj;if(r.hasClass("full-palette-toggle"))s.toggle_feature(r);else if(r.hasClass("tile-color")){s.$palette.find("span.tile-selected").removeClass("tile-selected");var n=r.data("color");s.update_spectrum(n,a,{},!0);var i=r.data("id");s.ajax_save_settings("redrawPalette",a),r=s.$palette.find("span."+i);var o=r.parent();r.addClass("tile-selected");var l=s.$palette.find("div.saved-colors-wrap"),c=l.find("span.mt-save-color"),d=l.find("span.mt-remove-color");o.hasClass("saved-tile")?(c.removeClass("show"),d.addClass("show")):(c.addClass("show"),d.removeClass("show"))}else if(r.hasClass("palette-button")){var n=a.spectrum("get").toRgbString(),u=n,_=!1;r.hasClass("mt-remove-color")&&(n=s.$palette.find("span.tile-selected").data("color"),u=!1,_=n),s.splice_sug_val(u,_,"saved_colors",{redrawPalette:1,save:!0})}else r.hasClass("refresh-icon")&&s.refresh_sug_values({specific:"site_colors",$resample:r})})},color_palette:function(){var t=e("#mt-picker-palette").clone().removeAttr("id"),r=t.find("li.view-full-palette"),a=s.pref.my_props.sug_values.color,n=s.pref.my_props.sug_values.saved_colors,i=s.pref.my_props.sug_values.site_colors;if(s.pref.full_color_palette){var o=r.find("span.full-palette-toggle");o.addClass("on").attr("title",o.data("neg"))}return t.find("ul.mt-picker-palette").html(e(s.color_palette_tiles("mini","recent",s.numMiniTiles-1,a)).add(r)),t.find("ul.recent-full-palette").html(s.color_palette_tiles("full","recent",s.numMiniTiles,a)),t.find("ul.saved-full-palette").html(s.color_palette_tiles("full","saved",s.numSavedTiles,n)),t.find("ul.site-full-palette").html(s.color_palette_tiles("full","site",s.numSiteTiles,i)),t},color_palette_tiles:function(e,t,r,a){for(var s="",n=0;n<r;++n){var i=a[n],o=i?'title="'+i+'"':"",l=i?'style="background-color:'+i+'"':"",c=i?"has-color":"no-color",d=e+"-"+t+"-"+n,u=i?'<span class="tile-color '+d+'" data-color="'+i+'" data-id="'+d+'" '+l+" "+o+"></span>":"";s+='<li class="'+e+"-tile "+t+"-tile  palette-tile "+c+'">'+u+"</li>"}return s},picker_method:function(e){if(t.startT(arguments),t.isDomEl(s.inputWaitingObj))if("hide"==e)s.inputWaitingObj.spectrum("hide");else if("clickpick"==e){var r=s.get_meta(s.inputWaitingObj,"property");r.property.find(".sp-container").trigger("mouseup")}t.endT(arguments)},update_spectrum:function(e,r,a,n){t.startT(arguments);var i=tinycolor(e),o=i.toRgb();tinycolor(o).isValid()&&(r.spectrum("set",o),s.update_spectrum_inputs(i,r,a,n),t.endT(arguments))},update_spectrum_inputs:function(e,r,a,n){if(t.startT(arguments),!e)return void r.val("");r.val(e.toRgbString());var i=s.get_meta(r,"property");i.property.find(".sp-input-hex").not(a).val(e.toHexString()),i.property.find(".sp-input-rgb").not(a).val(e.toRgbString()),i.property.find(".sp-input-hsl").not(a).val(e.toHslString()),i.property.find(".sp-input-opacity").not(a).val(e.toRgb().a),n&&s.maybe_sync_fields(r),t.isDomEl(a)&&a.focus(),t.endT(arguments)},clear_spectrum_inputs:function(e,r){t.startT(arguments),e.property.find("input.sp-input, input.color").val("").end().find("div.sp-alpha-inner, div.sp-preview-inner").css("background-color","transparent").end().find("div.sp-preview-inner").addClass("sp-clear-display"),r&&(s.picker_method("hide"),s.maybe_sync_fields(e.property.find("input.color"))),t.endT(arguments)},update_count:function(r,a,n,i,o){t.startT(arguments),t.hasValue(o)||(o=0);var l=parseInt(r.attr("rel"));if("add"==a)var c=l+parseInt(n);else if("subtract"==a)var c=l-parseInt(n);if(r.attr("rel",c),"section"!=i){if(0==l){r.after(' <span class="count-wrap">(<span class="state-count"></span>)</span>')}if(0==c){r.next("span").remove()}else r.next("span").find(".state-count").text(parseInt(c))}if("section"==i){var d=e("#total-sec-count"),u=parseInt(d.text());c>l?(s.totalSecs=parseInt(u+n),d.text(s.totalSecs),s.totalSels=s.totalSels+parseInt(o),e("#total-sel-count").text(parseInt(s.totalSels))):(s.totalSecs=parseInt(u-n),d.text(s.totalSecs),s.totalSels=s.totalSels-parseInt(o),e("#total-sel-count").text(parseInt(s.totalSels)))}else if("selector"==i){var _=e("#total-sel-count"),p=parseInt(_.text());c>l?(s.totalSels=parseInt(p+n),_.text(s.totalSels)):(s.totalSels=parseInt(p-n),_.text(s.totalSels))}s.toggle_enabled_buttons(),t.endT(arguments)},com_data_loading:function(r,a,n){t.startT(arguments),r.find("."+a+"-row").append(e("#loading-gif-template-"+a).clone().removeAttr("id")),s.update_prog_indicator("plus",TvrLang.load_style_opt),t.endT(arguments)},com_data_finished_loading:function(e,r){t.startT(arguments),e.find("img.ajax-loader").remove(),s.update_prog_indicator("minus",r,TvrLang.load_style_opt),t.endT(arguments)},ajax_load_ui_data:function(r,a,n,i,o,l,c,d){
t.startT(arguments),s.dataLoading=!0,s.log_action(a,"data-load");var u=(e("#ui-nonce").text(),s.ajaxUrl),_="mt_action=tvr_microthemer_ui_load_styles&tvr_load_section="+i;_+="&tvr_load_type="+l;_+="&tvr_load_selector="+o,e.ajax({type:"GET",url:u,async:!0,data:_,timeout:s.tOut,error:function(e,r){t.startT(arguments),s.com_data_finished_loading(a,[TvrLang.load_style_opt_failed,"<p>"+s.handle_ajax_error(e,r)+"</p><p>"+TvrLang.load_failed_explain+"</p>"]),t.endT(arguments)},success:function(i){t.startT(arguments),s.unlog_action(a,"data-load");var o=e(i).html();if(r.append(o),n.val(2),3!=c)if(s.com_data_finished_loading(a),d==TvrLang.load_before_modifying)s.toggle_modify_selector(a.find(".edit-icon").first());else if(d==TvrLang.load_before_retargeting)s.wiz_update_sel(a.find("span.retarget-selector").first());else if(d==TvrLang.load_before_iterating)s.tvr_iterate_selectors_v(a);else if(d==TvrLang.load_before_copying)s.copy_selector(a.find("span.copy-icon").first());else if(d==TvrLang.load_after_moving){var l={item:a};t.selector_received({},l)}else d==TvrLang.load_before_clearing&&s.clear_data_level(a.find("span.clear-icon").first());else--s.selsToLoad,0==s.selsToLoad&&(s.unlog_action(a,"all-sels-loading"),d==TvrLang.sec_rename?s.toggle_rename_section(a.find("span.toggle-rename-section")):d==TvrLang.sec_copy?s.copy_section(a.find(".copy-icon")):d==TvrLang.sec_clear&&s.clear_data_level(a.find("span.clear-icon").first()),s.com_data_finished_loading(a));t.endT(arguments)},complete:function(){s.unlog_action(a,"data-load"),s.dataLoading=!1}}),t.endT(arguments)},ajax_load_revisions_table:function(){t.startT(arguments),s.update_prog_indicator("plus",TvrLang.load_revisions_table),e.ajax({type:"GET",url:s.ajaxUrl,data:"mt_action=get_revisions",async:!0,timeout:s.tOut,error:function(e,r){t.startT(arguments),s.update_prog_indicator("minus",{"short":TvrLang.load_revisions_table_failed,"long":"<p>"+s.handle_ajax_error(e,r)+"</p>"},TvrLang.load_revisions_table),t.endT(arguments)},success:function(r){t.startT(arguments);var a=e(r).html();e("#revision-area").html(a),s.update_prog_indicator("minus",!1,TvrLang.load_revisions_table),t.endT(arguments)},complete:function(){t.startT(arguments)}}),t.endT(arguments)},update_import_css_preview:function(r,a,n){t.startT(arguments);var i=t.force_fresh_url(a.c.siblings("input.combobox").val());if("loadNew"==n){var o=t.file_extension(i)[1];if(o&&"css"!=o.toLowerCase()){var l="scss"==o?TvrLang.scss_import_long:TvrLang.css_import_long;return s.update_full_logs({"short":TvrLang.css_import_short,"long":"<p>"+l+"</p>"}),!1}a.dataType="text",t.domain_matches(i)||(i=s.ajaxUrl+"&mt_action=tvr_get_remote_css&url="+encodeURI(i),a.remote=1),s.simple_ajax_request({url:i,dataType:a.dataType,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:s.update_import_css_preview,cbfArgs:[a,"updateACE"]})}else{if(a.remote){var c=e(r),d=c.find("ul.logs");r=c.find("#remote-css").text(),"0"===r&&(r="/* Stylesheet could not be loaded.\n\n",d.find("li").each(function(){r+=e(this).find(".short").text()+"\n",r+=e(this).find(".long").text()+"\n\n"}),r+="*/")}e("#import-stats").removeClass("show"),s.update_import_css_editor(r),s.remember_css_import_file()}t.endT(arguments)},update_import_css_editor:function(e){t.startT(arguments),a.update_arbitrary_editor({context:"importCSS",editorID:"preview-import-css-0",data:e,filterClass:"preview-import-css",readOnly:!1,editorHeight:370}),t.endT(arguments)},sortByFrequencyAndRemoveDuplicates:function(e){function t(e,t){return a[t]-a[e]}for(var r,a={},s=e.length,n=0;n<s;n++)r=e[n],r in a?a[r]++:a[r]=1;var i=[];for(r in a)i.push(r);return i.sort(t)},update_gathered_css_store:function(e,t,r,a){var s=e.root_cat_keys[t.prop];if(s){var n=t.value.trim();if(n&&"initial"!=n&&"inherit"!=n&&"none"!=n)if("color"==s){var i=tinycolor(n);n=i.toRgbString(),e.store.site_colors.push(n)}else e.store[s].push(n)}return e},reinit_stylesheet_rules:function(e){t.startT(arguments),s.reinitRules=!1,s.sRules.init(function(){e.cbFunction&&e.cbFunction.apply(this,e.cbfArgs)}),t.endT(arguments,1)},refresh_sug_values:function(r){t.startT(arguments),r.$resample&&r.$resample.addClass("active"),s.reinitRules?s.reinit_stylesheet_rules({cbFunction:s.refresh_sug_values,cbfArgs:[r]}):s.sRules.getCSSStyleSheetRules("*","properties",-1,function(t){var a=e.extend(!0,{},TvrMT.data.prog.gatheredCSS);for(var n in t){var i=t[n].properties;if(i)for(var o in i){var l=i[o];if(l&&"0px"!=l&&a.eligable[o]){var c=s.input_field_available(o,l,{gatheredCSS:1});if(c)if(e.isArray(c))for(var d in c)a=s.update_gathered_css_store(a,c[d],o,l);else a=s.update_gathered_css_store(a,c,o,l)}}}for(var u in a.store)if(r.all||u==r.specific){a.store[u]=s.sortByFrequencyAndRemoveDuplicates(a.store[u]);var _="color"==u||"saved_colors"==u||"site_colors"==u,p=s.max_sug_vals(u);s.pref.my_props.sug_values[u].length&&(s.pref.my_props.sug_values[u]=[]);for(var f in a.store[u]){if(f>p-1)break;var g=a.store[u][f];s.pref.my_props.sug_values[u].push(g)}_?s.pref.my_props.sug_values.site_colors.sort():s.pref.my_props.sug_values[u]=s.sort_number_unit_strings(s.pref.my_props.sug_values[u]),a.store[u]=[]}r.$resample&&"site_colors"==r.specific&&s.draw_palette(),s.save_sug_vals(r)}),t.endT(arguments,1)},splice_sug_val:function(e,r,a,n){var i=s.pref.my_props.sug_values[a];if(e){if(t.in_array(e,i))return!1;var o=s.max_sug_vals(a);i.unshift(e),i.length>o&&i.pop()}if(r){var l=i.indexOf(r);l>-1&&i.splice(l,1)}n.redrawPalette&&s.draw_palette(),n.save&&s.save_sug_vals({specific:a})},max_sug_vals:function(e){var t;switch(e){case"color":t=s.numMiniTiles;break;case"site_colors":t=s.numSiteTiles;break;case"saved_colors":t=s.numSavedTiles;break;default:t=s.numSug}return t},save_sug_vals:function(e){var t,r;e.all?(r="all",t=s.pref.my_props.sug_values,s.pref.default_sug_values_set=!0):e.specific&&(r=e.specific,t=s.pref.my_props.sug_values[r]),s.simple_ajax_request({type:"POST",url:s.ajaxUrl+"&update_sug_values="+r,sendData:s.serialized_data_with_single_key(JSON.stringify(t)),plus:"",minus:""})},sort_number_unit_strings:function(e){var r=/^((?:\d+)?(?:[.]?\d{0,2})?)(\D*)/,a=[],s=[];for(var n in e){var i=e[n],o={val:i},l=r.exec(i);l&&(o.num=parseFloat(l[1]),o.str=l[2]),a.push(o)}a.sort(t.firstBy("str").thenBy("num"));for(var c in a)s.push(a[c].val);return s},update_stylesheet_rules:function(){t.startT(arguments);var a=e("#actual-styles");if(a.parent().addClass("still-gathering"),s.reinitRules)s.reinit_stylesheet_rules({cbFunction:s.update_stylesheet_rules,cbfArgs:[]});else{var n=r.triggerEl[0];s.sRules.getCSSRules(n,"*",function(e){a.html(s.sortThenOutput(n,e)),a[0].scrollTop=0})}a.parent().removeClass("still-gathering"),t.endT(arguments,1)},sortThenOutput:function(e,r){r.sort(function(e,t){return e.inheritance.length==t.inheritance.length?e.specificity.toString()===t.specificity.toString()?e.index-t.index:e.specificity[0]!==t.specificity[0]?e.specificity[0]-t.specificity[0]:e.specificity[1]!==t.specificity[1]?e.specificity[1]-t.specificity[1]:e.specificity[2]!==t.specificity[2]?e.specificity[2]-t.specificity[2]:e.specificity[3]-t.specificity[3]:t.inheritance.length-e.inheritance.length}),r.reverse();for(var a="<dl>",s=null,n=0;n<r.length;n++){var i=r[n].inheritance.length>0?r[n].inheritance[0]:null;if(null!=r[n].properties){if(r[n].inheritance.length>0&&i!=s){s=i;var o=i.nodeName.toLowerCase()+(""!=i.id?"#"+i.id:""!=i.className?"."+i.className:"");a+='<dt><span class="inheritance-label">'+TvrLang.inherited_from+': </span><span class="inheritance-el" title="'+o+'">'+o+"</span></dt>"}var l="",c="",d="";if(r[n].href){var u=t.root_rel(r[n].href).split("?")[0],_=t.basename(u),p=r[n].href.indexOf("micro-themes/")>-1?TvrLang.mt_stylesheet+"\n"+u:u;d='rel="inspect-stylesheet" data-href="'+r[n].href+'" data-selector="'+r[n].selector+'" data-media="'+r[n].media+'"',l='<span class="style-src show-dialog" '+d+'title="'+p+'">'+_+"</span>",c+=" new-sheet-rule"}else c+=" no-sheet-rule";var f="";if(r[n].media!=T){var g="all"==r[n].media?"["+TvrLang.all_devices+"]":r[n].media;f='<span class="media-condition">'+g+"</span>",c+=" has-media-rule"}else c+=" no-media-rule";var m='<span class="media-ss'+c+'">'+l+f+"</span>";a+="<dd>"+m+"<pre>",a+="<abbr>",a+='<span class="cssselector">'+r[n].selector+"</span> {\n";for(var v in r[n].properties)if(r[n].properties.hasOwnProperty(v)){var h=r[n].properties[v];a+="    ",a+="cancelled"==h.status?"<del>"+v+": "+h.value+";</del>":'<span class="cssproperty">'+v+'</span>: <span class="cssvalue">'+h.value+"</span>;",a+="\n"}a+="}</abbr></pre></pre>";var T=(r[n].href,r[n].media)}}return"<dl>"==a&&(a+="<dt>The selected element has no rules</dt>"),a+="</dl>"},update_wizard_html:function(e){t.startT(arguments);var s=(r.dom,r.stat.html[0].outerHTML),n={html:{preserve_newlines:!0,max_preserve_newlines:0,indent_inner_html:!0,indent_handlebars:!0,indent_size:2,extra_liners:[],unformatted:[]}},i=html_beautify(s,n);a.update_arbitrary_editor({context:"wizardHTML",editorID:"wizard_inspector_html",data:i,mode:"html",filterClass:"wizard_inspector_html",containerClass:".css-code-wrap",dontSetHeight:!0,readOnly:!0,fontSize:"12px",noValidation:!0,directContent:i,mirrorRender:!e.updateVisEditor,dontScrollHTML:e.dontScrollHTML});t.endT(arguments,1)},breadcrumb_clicked:function(e){var t,a=parseInt(e.data("level"));t=a>-1?r.dom.nodes[a].family.el.fullObj:r.dom.nodes[0].family.child.m[0].obj,r.all_targeting_actions(t,{wrapjQuery:!1,scroll:!0})},update_breadcrumbs:function(){var t=e("#dom-bread"),a=t.find(".drag-containment"),n=t.find(".drag-content"),i=e.extend(!0,[],r.dom.nodes);i.reverse();for(var o="",l=r.dom.nodes.length-1,c=l;c>=0;c--){var d=r.dom.nodes[c],u=0===c?" active-crumb":"",_=c!=l?'<span class="bc-sep">&raquo;</span>':"";o+=_+'<span class="mt-breadcrumb'+u+'" data-level="'+c+'">'+d.elBcLabel+"</span>"}var p=r.dom.nodes[0].family.child;if(p.count){var f=p.m[0].bcLabel;o+=_+'<span class="mt-breadcrumb child-crumb" data-level="-1">'+f+"</span>"}n.css("width","auto").html(o);var g=n.width(),m=t.width(),v=0,h=0,T="default",b=g;n.width(g).css("left","0"),g>m?(v=g-m,h="-"+v+"px",T="e-resize",b=m+2*v,s.stat.breadcrumbs.draggable("enable")):s.stat.breadcrumbs.draggable("disable"),a.width(b).css({left:h,cursor:T})},update_dom_arrows:function(t){var a=e("#nav-bread").find(".refine-target-controls"),s=a.find("span");s.addClass("disabled");var n=r.dom.nodes[0].family;n.par.count&&a.find("span.tvr-parent").removeClass("disabled"),n.prev.count&&a.find("span.tvr-prev-sibling").removeClass("disabled"),n.next.count&&a.find("span.tvr-next-sibling").removeClass("disabled"),n.child.count&&a.find("span.tvr-child").removeClass("disabled")},switch_html_element:function(e){var t=!1,a=r.dom.nodes[0].family,s=e.attr("class");s.indexOf("tvr-parent")>=0?t=a.par.m[0].obj:s.indexOf("tvr-child")>=0?t=a.child.m[0].obj:s.indexOf("tvr-prev-sibling")>=0?t=a.prev.m[0].obj:s.indexOf("tvr-next-sibling")>=0&&(t=a.next.m[0].obj),t&&r.all_targeting_actions(t,{wrapjQuery:!1,scroll:!0})},eval_gui_pos_duplicate:function(e,r,a){if(t.startT(arguments),a.css_imp_always_cus_code)return t.endT(arguments),!1;for(var n in e.pos_duplicate)e.pos_duplicate[n].is_def=0;var i=r.declarations;for(var o in i){var n=i[o].property;if("background"==n){var l=s.sh[n](TvrMT.data.prog.sh.background,n,i[o].value);l&&l[100]&&(e.pos_duplicate.gradient.is_def=1)}else e.pos_duplicate[n]&&(e.pos_duplicate[n].is_def=1)}t.endT(arguments)},will_be_duplicated:function(e,r,a){if(t.startT(arguments),a.css_imp_always_cus_code)return t.endT(arguments),!1;for(var s in e.pos_duplicate)if(e.pos_duplicate[s].is_def&&(t.in_array(r.property,e.pos_duplicate[s].ignore)!==!1||t.in_array(r.value,e.pos_duplicate[s].ignore,!0)!==!1))return t.endT(arguments),!0;return t.endT(arguments),!1},remoteImages:{},process_css_import:function(r,n){t.startT(arguments),s.remoteImages={};var i=s.get_import_opts();if(i){if(!i.css_source&&(i.css_imp_adjust_paths||i.css_imp_copy_remote))return alert(TvrLang.enter_css_source),!1;s.remember_css_import_file(),i.css_imp_max;var o=s.parse_css(i.css,!1);if(!o)return!1;if(!o.stylesheet||!o.stylesheet.rules)return alert(TvrLang.imp_css_empty),!1;var l=o.stylesheet.rules,c={non_section:{m_query:{},hand_coded_css:{},active_queries:{},m:{opts:i,pos_duplicate:{gradient:{is_def:0,ignore:["-webkit-gradient","-webkit-linear-gradient","-moz-linear-gradient","-ms-linear-gradient","-o-linear-gradient","-pie-background"]},opacity:{is_def:0,ignore:["-ms-filter","filter","-moz-opacity","-khtml-opacity"]},"box-shadow":{is_def:0,ignore:["-webkit-box-shadow","-moz-box-shadow"]},"border-radius":{is_def:0,ignore:["-webkit-border-radius","-moz-border-radius"]}},stats:{media:[],folders:[],selectors:[],declarations:[],gui_custom:[],remote_images:[],full_custom:{charset:[],"import":[],namespace:[],"font-face":[],keyframes:[],document:[],page:[],supports:[]}},uaNeeded:!1,levels:[],important_levels:[],mqCount:0,folderCount:0,lastFComment:"",fName:"",fSlug:"",tmpfSlug:!1,fSelCount:"",sSlug:"",sName:"",sCode:"",selCount:0,unqSels:{},styleCount:0}}};c=s.traverse_ast_css(c,l,"Reg");var d=c.non_section.m,u="",_=[];for(var p in s.remoteImages)u+=p+","+s.remoteImages[p]+"|",_.push(p);u=t.rtrim(u,"\\|"),e("#get_remote_images").val(u);var f=d.stats.full_custom,g="",m=" /* Imported: "+t.date_format(new Date,"mysql")+" */",v=-1;for(var h in f)f[h].length&&(v++,0==v&&(f[h][0]=f[h][0].replace(/(\n|$)/,m+"$1")),g+=f[h].join("\n")+"\n");if(g&&(c.non_section.hand_coded_css=g),"preview-stats"==n){var T=e("#import-stats");T.fadeOut("fast",function(){T.fadeIn("slow",function(){t.scroll_to(e("#import-from-pack-dialog"),{offset:-780})})});var b=d.stats;b.errors=o.stylesheet.parsingErrors,b.remote_images=_;for(var p in b)if(e.isArray(b[p])){TvrMT.data.prog.combo[p]=b[p];var y=e("#stats-"+p),w=b[p].length;y.find(".stat-count").text("("+w+")")}a.update_arbitrary_editor({context:"statsCSS",editorID:"stats-full_custom",data:g,filterClass:"stats-full_custom",readOnly:!1,editorHeight:370}),t.endT(arguments)}else if("do-import"==n)return c.non_section.m={},e("#stylesheet_import_json").val(JSON.stringify(c)),t.endT(arguments),!0}},update_full_custom:function(e,r,a){t.startT(arguments),e.stats.full_custom[r.type].push(s.stringify_css(r,{singleNode:1,opts:a,tab:"",depth:0})),t.endT(arguments)},traverse_ast_css:function(r,a,n,i){t.startT(arguments);var o=r.non_section.m,l=o.opts;for(var c in a){var d=a[c];switch(o.levels="MQ"==n?["non_section","m_query",i]:[],o.important_levels="MQ"==n?["non_section","important","m_query",i]:["non_section","important"],d.type){case"comment":var u=/^(?:\[\s(.+)\s])?(?:=\s(.+)\s========================\s)?(?:\*\s(?:.+)\s>>\s(.+)\s\*)?$/,_=u.exec(d.comment);_&&(_[1]?o.extractedMQ=_[1]:_[2]?o.extractedF=_[2]:_[3]&&(o.extractedS=_[3]));break;case"rule":l.css_imp_sels&&(l.css_imp_sels&&"declaration"!=d.type&&(0==o.folderCount||o.fSelCount>=25||o.extractedF)&&(o.fSelCount=1,++o.folderCount,o.extractedF?(o.fName=TvrLang.imp_css_folder+" - "+o.extractedF,o.extractedF=!1):o.fName=TvrLang.imp_css_folder+" "+o.folderCount,o.fSlug=t.convert_to_param(o.fName),s.fill_object(r,[o.fSlug,"this","label"],o.fName),o.stats.folders.push(o.fName)),r=s.get_ast_selector(d.selectors,l,o,r,n),s.eval_gui_pos_duplicate(o,d,l),l.css_imp_styles&&(r=s.traverse_ast_css(r,d.declarations,n,i)));break;case"declaration":var p=s.maybe_auto_adjust_path(l,d.value,d.type);o.levels.push(o.tmpfSlug?o.tmpfSlug:o.fSlug,o.sSlug,"styles"),o.important_levels.push(o.tmpfSlug?o.tmpfSlug:o.fSlug,o.sSlug);var f=s.input_field_available(d.property,p);if(!l.css_imp_always_cus_code&&f)if(e.isArray(f))for(var c in f){var g=e.extend(!0,[],o.levels);g.push(f[c].group,f[c].prop),s.fill_object(r,g,f[c].value);var m=f[c].important_prop==f[c].prop?" !important":"";o.stats.declarations.push(f[c].longProp+": "+f[c].value+m),s.maybe_fill_important(r,o,f[c])}else{o.levels.push(f.group,f.prop),s.fill_object(r,o.levels,f.value);var m=f.important_prop==f.prop?" !important":"";o.stats.declarations.push(f.longProp+": "+f.value+m),s.maybe_fill_important(r,o,f)}else{if(s.will_be_duplicated(o,d,l))continue;o.levels.push("code","css");var v=d.property+": "+p+";";s.fill_object(r,o.levels,v,"\n\t"),o.stats.gui_custom.push(v)}break;case"charset":s.update_full_custom(o,d,l);break;case"import":s.update_full_custom(o,d,l);break;case"font-face":s.update_full_custom(o,d,l);break;case"keyframes":s.update_full_custom(o,d,l);break;case"keyframe":break;case"media":if(l.css_imp_mqs){var h="@media "+d.media,i=s.mq_exists(h,r.non_section.active_queries);if(!i){i=++o.mqCount;var T=o.extractedMQ?o.extractedMQ:"MQ "+o.mqCount;o.extractedMQ=!1,r.non_section.active_queries[i]={label:T,query:h},o.stats.media.push(T+": "+h)}l.css_imp_sels&&(r=s.traverse_ast_css(r,d.rules,"MQ",i))}break;case"namespace":s.update_full_custom(o,d,l);break;case"document":s.update_full_custom(o,d,l);break;case"page":s.update_full_custom(o,d,l);break;case"supports":s.update_full_custom(o,d,l)}}return t.endT(arguments),r},fill_object:function(e,r,a,s){t.startT(arguments);for(var n in r)e.hasOwnProperty(r[n])||(e[r[n]]={}),n<r.length-1&&(e=e[r[n]]);"string"==typeof e[r[n]]&&s?e[r[n]]=e[r[n]]+s+a:e[r[n]]=a,t.endT(arguments)},build_field_data:function(e,r,a,n){t.startT(arguments);var i=-1;for(var o in r){var l=a[r[o].index+1],c=r[o].config.initial,d=t.isDefined(l)?l:!!c&&c;d&&(e[++i]=s.check_import_important({group:r[o].group,prop:r[o].prop,value:d,longProp:o},r,n))}t.endT(arguments)},input_field_available:function(r,a){t.startT(arguments);var n=TvrMT.data.prog.sh,i=TvrMT.data.prog.lh,o=[];if("background-origin"==r)return!1;if("background-image"==r||"list-style-image"==r){if(a.indexOf("gradient")>-1)return!1;var l=new RegExp(s.reg.url({inc:["none"],inside:1}),"i").exec(a);l&&l[1]&&(a=l[1])}if("background"!=r&&!s.commas_ok(r,a,n,i))return!1;if(n[r]){var c=n[r],d=s.sh[r](c,r,a);return!!d&&(s.build_field_data(o,c,d,a),"background"==r&&e.isArray(d[100])&&s.build_field_data(o,n.gradient,d[100],a),t.endT(arguments),o)}if(i[r]){var u=i[r];return t.endT(arguments),s.check_import_important({group:u.group,prop:u.prop,value:a,longProp:r})}return!1},check_import_important:function(e,r,a){t.startT(arguments);var n=e.value;if(!r&&s.is_important(n)||r&&s.is_important(a))if(e.value=s.strip_important(n),r){var i=!1;for(var o in r)r[o].important_carrier&&(i=r[o].prop);e.important_prop=i?i:e.prop}else e.important_prop=e.prop;return t.endT(arguments),e},is_important:function(e){return e.indexOf("!important")>-1},strip_important:function(e){return e.replace("!important","")},maybe_fill_important:function(r,a,n){if(t.startT(arguments),n.important_prop){var i=e.extend(!0,[],a.important_levels);i.push(n.group,n.important_prop),s.fill_object(r,i,1)}t.endT(arguments)},commas_ok:function(e,r,a,n){t.startT(arguments);var i=0,o=a[e]?a[e]:n[e]?n[e]:0;if(!o)return t.endT(arguments),!1;if(a[e]){for(var l in o)if(o[l].multiple){i=1;break}}else n[e]&&(i=o.multiple);if(i){var c=new RegExp(s.reg.color({noNames:1}),"g"),d=new RegExp(s.reg.gradient(),"g"),u=r.replace(d,"").replace(c,"");if(u.indexOf(",")>-1)return t.endT(arguments),!1}return t.endT(arguments),!0},get_valid_keywords:function(r){t.startT(arguments);var a={};for(var s in r)a[r[s]]=e.extend(!0,[],TvrMT.data.prog.combo[r[s]]),a[r[s]]?(""===a[r[s]][0]&&a[r[s]].shift(),a[r[s]].sort(function(e,t){return t.length-e.length})):a[r[s]]=[];return t.endT(arguments),a},prop_patterns:function(e,r,a,s){t.startT(arguments);var n="",i=0;for(var o in e)if(("other"==a&&o!=r||"this"==a&&o==r)&&(n+=++i>1?"|":"",n+=e[o].join("|")),o==r&&("hor"==a||"vert"==a)){var l=[],c={},d=-1;for(var u in e[o]){var _=e[o][u].split(" "),p="hor"==a?_[0]:_[1];c[p]||(l[++d]="hor"==a?_[0]:_[1],c[p]=1)}return n=l.join("|")}return t.endT(arguments),n},filter_initial_inherit:function(e,r,a){if(t.startT(arguments),!e)return!1;var s=("initial"==e[r]||"inherit"==e[r]||"none"==e[r])&&e[r];if(s)if(a)e[1]=s;else for(var n in e)n>0&&Number.isInteger(parseInt(n))&&(e[n]=s);return t.endT(arguments),e},reg:{url:function(e){var t=e&&e.inc?e.inc.join("|")+"|":"",r=e&&e.inside?"":"?:";return t+"(?:url\\(['\"]?("+r+".*?)['\"]?\\))"},quoted:function(e){var t=e&&e.inside?"":"?:";return"(?:['\"]("+t+".*?)['\"])"},gradient:function(e){var t=e&&e.inside?"":"?:";return"(?:repeating-)?(?:linear|radial)-gradient\\s*\\(("+t+"(?:\\([^\\)]*\\)|[^\\)\\(]*)*)\\)"},leng:function(e){var t=e&&e.inc?e.inc.join("|")+"|":"",r=e&&e.optUnit?"?":"";return"(?:"+t+"[-\\.\\d]+(?:%|in|r?[cem][chm]|v(?:h|w|min|max)|ex|p[ctx])"+r+"|0(?![^url\\(]*\\)))"},colornames:function(e){t.startT(arguments);var r=tinycolor.names,a="transparent|";for(var s in r)a+=s+"|";return t.endT(arguments),a.slice(0,-1)},color:function(e){var t=e&&e.noNames?"":"|"+s.reg.colornames();return"#(?:[\\da-f]{3}){1,2}|rgb\\((?:\\d{1,3},\\s*){2}\\d{1,3}\\)|rgba\\((?:\\d{1,3},\\s*){3}\\d*\\.?\\d+\\)|hsl\\(\\d{1,3}(?:,\\s*\\d{1,3}%){2}\\)|hsla\\(|[a-z]+\\d{1,3}(?:,\\s*\\d{1,3}%){2},\\s*\\d*\\.?\\d+\\)"+t},color_chars:function(e){return"[a-zA-Z.,#\\()0-9%]+"},no_following_bracket:function(e){return"(?![^()]*(?:\\([^()]*\\))?\\))"}},combineRegExp:function(e,r){t.startT(arguments);var a,s="";for(a=0;a<e.length;a++)s+="string"==typeof e[a]?e[a]:e[a].source;return t.endT(arguments),new RegExp(s,r)},generateRegExp:function(){t.startT(arguments);var e="gi",r=/(?:[+-]?\d*\.?\d+)(?:deg|grad|rad|turn)/,a=/to\s+((?:(?:left|right)(?:\s+(?:top|bottom))?))/,n=/\s*,\s*/,i=/\#(?:[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/,o=/\(\s*(?:[0-9]{1,3}\s*,\s*){2}[0-9]{1,3}\s*\)/,l=/\(\s*(?:[0-9]{1,3}\s*,\s*){3}(?:[\.\d]+)\s*\)/,c=/(?:[+-]?\d*\.?\d+)(?:%|[a-z]+)?/,d=new RegExp(s.reg.colornames(),"i"),u=s.combineRegExp(["(?:",i,"|","(?:rgb|hsl)",o,"|","(?:rgba|hsla)",l,"|",d,")"],""),_=s.combineRegExp([u,"(?:\\s+",c,")?"],""),p=s.combineRegExp(["(?:",_,n,")*",_],""),f=s.combineRegExp(["(?:(",r,")|",a,")"],""),g=s.combineRegExp(["(",f,")",n,"(",p,")"],e),m=s.combineRegExp(["\\s*(",u,")","(?:\\s+","(",c,"))?","(?:",n,"\\s*)?"],e);return t.endT(arguments),{gradientSearch:g,colorStopSearch:m}},parseGradient:function(e,r){t.startT(arguments);var a,s,n,i;if(s=e.gradientSearch.exec(r),null!==s)for(a={original:s[0],colorStopList:[]},s[1]&&(a.line=s[1]),s[2]&&(a.angle=s[2]),s[3]&&(a.sideCorner=s[3]),n=e.colorStopSearch.exec(s[4]);null!==n;)i={color:n[1]},n[2]&&(i.position=n[2]),a.colorStopList.push(i),n=e.colorStopSearch.exec(s[4]);return t.endT(arguments),a},test_this_thing:function(e){t.startT(arguments);var r,a=s.generateRegExp(),n=/.*gradient\s*\(((?:\([^\)]*\)|[^\)\(]*)*)\)/,i=n.exec(e);r=null!==i?s.parseGradient(a,i[1]):"Failed to find gradient",t.endT(arguments)},sh:{padding:function(e,t,r){return s.sh.quad(e,t,r)},margin:function(e,t,r){return s.sh.quad(e,t,r)},"border-color":function(e,t,r){var a=new RegExp(s.reg.color(),"ig"),n=r.match(a);if(!n)return!1;var i="";for(var o in n)i+=0===o?o:" "+o;var l=s.sh.quad(e,t,i);for(var c in l){var d=l[c];n[d]&&(l[c]=n[d])}return l},"border-width":function(e,t,r){return s.sh.quad(e,t,r)},"border-style":function(e,t,r){return s.sh.quad(e,t,r)},"border-radius":function(e,t,r){return s.sh.quad(e,t,r)},quad:function(e,r,a){t.startT(arguments);var n=s.strip_important(a).trim();if("border-radius"==r){if("initial"==n||"inherit"==n)return["",n];var i=n.split("/"),o=!!i[1]&&i[1].trim();n=i[0].trim()}var l=s.sh["split-quad"](n);if(o){var c=s.sh["split-quad"](o);for(var d in c)l[d]=l[d]+" "+c[d]}return l.unshift(""),t.endT(arguments),l},"split-quad":function(e){t.startT(arguments);var r=e.split(" "),a=[];for(var s in r)""!=r[s]&&a.push(r[s]);r=a;var n=[];return n[0]=r[0],n[1]=r[1]?r[1]:r[0],n[2]=r[2]?r[2]:r[0],n[3]=r[3]?r[3]:r[1]?r[1]:r[0],t.endT(arguments),n},font:function(e,r,a){t.startT(arguments);var n=["^(?:(?:\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|"+s.reg.leng()+")","(?:\\s*\\/\\s*(normal|"+s.reg.leng({optUnit:1})+"))?","\\s*([-,\\\"\\'\\sa-z]+?)\\s*)|(caption|icon|menu|message-box|small-caption|status-bar|initial|inherit))$"],i=new RegExp(n.join(""),"i"),o=i.exec(a);if(o&&o[7]){if("initial"!=o[7]&&"inherit"!=o[7])return!1;o=s.filter_initial_inherit(o,7)}return t.endT(arguments),o},border_pattern:function(e,r,a){t.startT(arguments);var n=s.get_valid_keywords(["border_top_style"]),i=s.prop_patterns(n,"border_top_style","this",e),o=s.sh.general_wl(),l=2,c="\\s+",d=["^\\s*","(?=(?:(?:"+o+c+"){0,"+l+"}(?:("+s.reg.leng()+"))){0,1})","(?=(?:(?:"+o+c+"){0,"+l+"}("+i+")){0,1})","(?=(?:(?:"+o.replace("#","")+c+"){0,"+l+"}(?:("+s.reg.color()+"))){0,1})","(?=(initial|inherit){0,1})"];return t.endT(arguments),new RegExp(d.join(""),"i")},border:function(e,r,a){t.startT(arguments);var n=s.filter_initial_inherit(s.sh.border_pattern(e,r,a).exec(a),4);if(n){var i=["",n[1],n[1],n[1],n[1],n[2],n[2],n[2],n[2],n[3],n[3],n[3],n[3]];n=i}return t.endT(arguments),n},"border-top":function(e,t,r){return s.filter_initial_inherit(s.sh.border_pattern(e,t,r).exec(r),4)},"border-right":function(e,t,r){return s.filter_initial_inherit(s.sh.border_pattern(e,t,r).exec(r),4)},"border-bottom":function(e,t,r){return s.filter_initial_inherit(s.sh.border_pattern(e,t,r).exec(r),4)},"border-left":function(e,t,r){return s.filter_initial_inherit(s.sh.border_pattern(e,t,r).exec(r),4)},general_wl:function(){return t.startT(arguments),"(?:[-a-z%:#,\\?'\"\\/\\.\\d\\(\\)]|"+s.reg.url()+")+"},background:function(e,r,a){t.startT(arguments);var n=[];for(var i in e)n.push(e[i].prop);var o=s.get_valid_keywords(n),l=s.sh.general_wl(),c=20,d="\\s+",u=s.prop_patterns(o,"background_position","hor",e),_=s.prop_patterns(o,"background_position","vert",e),p=(s.prop_patterns(o,"background_position","this",e)+"|"+s.reg.leng(),s.prop_patterns(o,"background_origin","this",e)),f=s.prop_patterns(o,"background_size","this",e),g=["^\\s*","(?=(?:(?:"+l.replace("#","")+d+"){0,"+c+"}(?:("+s.reg.color()+"))){0,1})","(?=(?:(?:"+l+d+"){0,"+c+"}(?:"+s.reg.url({inc:["none"],inside:1})+")){0,1})","(?=(?:(?:(?!"+u+"|"+_+"|"+s.reg.leng()+")"+l+d+"){0,"+c+"}((?:"+u+"|"+_+"|"+s.reg.leng()+")(?:\\s(?:"+_+"|"+u+"|"+s.reg.leng()+")){0,1})){0,1})","(?=(?:(?:"+l+d+"){0,"+c+"}("+s.prop_patterns(o,"background_repeat","this",e)+")){0,1})","(?=(?:(?:"+l+d+"){0,"+c+"}("+s.prop_patterns(o,"background_attachment","this",e)+")){0,1})","(?=(?:(?:(?!"+f+")"+l+d+"){0,"+c+"}(?:\\/\\s*)((?:"+f.replace("|auto","")+")|"+s.reg.leng({inc:["auto"]})+"(?:\\s"+s.reg.leng({inc:["auto"]})+"){0,1})){0,1})","(?=(?:(?:(?!"+p+")"+l+d+"){0,"+c+"}("+p+")){0,1})","(?=(?:(?:"+l+d+"){0,"+c+"}(?:\\7.+?)("+p+")){0,1})","(?=(initial|inherit){0,1})"],m=a,v={pattern:new RegExp(s.reg.gradient({inside:1})+"{0,1}","i"),placeholder:"gradientPlaceholder"},h=v.pattern.exec(a);if(null!==h){if(v.full=h[0],v.inside=h[1],m=m.replace(v.full,v.placeholder),v.full.indexOf("radial")>-1||v.full.indexOf("repeating")>-1)return!1;if(v.anyl=s.parseGradient(s.generateRegExp(),v.inside),!v.anyl)return!1;var T=v.anyl.colorStopList;if(T.length>3)return!1;if(T[0]&&T[0].position||T[2]&&T[2].position)return!1}var b=(m.match(/,/g)||[]).length;if(b>1)return!1;if(b>0){var y=m.split(",");if(y[1].trim()!=v.placeholder)return!1}var w=new RegExp(g.join(""),"i"),h=w.exec(m);if(h[7])return!1;if(v.anyl){h||(h=[]);var x=v.anyl,T=x.colorStopList,k=["",x.line];T[0]?k.push(T[0].color):k.push(""),T[1]&&(k.push(T[1].color),T[1].position?k.push(T[1].position):k.push("")),T[2]?k.push(T[2].color):k.push(""),h[100]=k}return t.endT(arguments),s.filter_initial_inherit(h,9)},"list-style":function(e,r,a){t.startT(arguments);var n=[];for(var i in e)n.push(e[i].prop);var o=s.get_valid_keywords(n),l=s.prop_patterns(o,"list_style_type","this",e),c=s.prop_patterns(o,"list_style_position","this",e),d=s.sh.general_wl(),u=2,_="\\s+",p=["^\\s*","(?=(?:(?:"+s.prop_patterns(o,"list_style_type","other",e)+_+"){0,"+u+"}(?:("+l+")\\s*){1})?)","(?=(?:(?:"+d+_+"){0,"+u+"}(?:"+s.reg.url({inc:["none"],inside:1})+"\\s*){1})?)","(?=(?:(?:"+d+_+"){0,"+u+"}(?:("+c+")\\s*){1})?)","(?=(initial|inherit){0,1})"],f=new RegExp(p.join(""),"i"),g=f.exec(a);return"none"==g[1]&&"none"==g[2]&&(a.match(/none/g)||[]).length<2&&(g[2]=void 0),t.endT(arguments),s.filter_initial_inherit(g,4)},"text-shadow":function(e,r,a){t.startT(arguments);var n="(?!"+s.reg.leng()+")"+s.reg.color_chars(),i=["^\\s*","(?:","(?=(?:(?:"+n+")\\s+){0,1}(?:("+s.reg.leng()+")\\s+){1})","(?=(?:(?:"+n+")\\s*){0,1}(?:"+s.reg.leng()+"\\s*){1}(?:("+s.reg.leng()+")\\s*){1})","(?=(?:(?:"+n+")\\s*){0,1}(?:"+s.reg.leng()+"\\s+){2}(?:("+s.reg.leng()+")\\s*){0,1})","(?=(?:(?:"+s.reg.leng()+"\\s*){0,3})(?:("+s.reg.color()+")\\s*){0,1})","|(?=(initial|inherit|none){0,1})",")"],o=new RegExp(i.join(""),"i");return t.endT(arguments),s.filter_initial_inherit(o.exec(a),5,!0)},"box-shadow":function(e,r,a){t.startT(arguments);var n="(?!"+s.reg.leng()+")"+s.reg.color_chars(),i=["^\\s*","(?:","(?=(?:(?:"+n+")\\s*){0,1}(?:("+s.reg.leng()+")\\s+){1})","(?=(?:(?:"+n+")\\s*){0,1}(?:"+s.reg.leng()+"\\s+){1}(?:("+s.reg.leng()+")\\s*){1})","(?=(?:(?:"+n+")\\s*){0,1}(?:"+s.reg.leng()+"\\s*){2}(?:("+s.reg.leng()+")\\s*){0,1})","(?=(?:(?:"+n+")\\s*){0,1}(?:"+s.reg.leng()+"\\s*){3}(?:("+s.reg.leng()+")\\s*){0,1})","(?=(?:(?:"+s.reg.leng()+"\\s*){0,4})(?:("+s.reg.color()+")\\s*){0,1})","(?=(?:(?:"+s.reg.color_chars()+"\\s*){0,1}(?:"+s.reg.leng()+"\\s*){2,4})(?:"+s.reg.color()+"\\s*){0,1}(?:(inset)\\s*){0,1})","|(?=(initial|inherit|none){0,1})",")"],o=new RegExp(i.join(""),"i"),l=s.filter_initial_inherit(o.exec(a),7,!0);return t.endT(arguments),l}},get_ast_selector:function(e,r,a,n,i){if(t.startT(arguments),a.sCode=e.join(", "),a.extractedS?(a.sName=a.extractedS,a.extractedS=!1):r.css_imp_friendly?(a.sName=s.human_css_name(a.sCode,"import",a),a.sName=s.ensure_unqique_name(a.sName,a.sCode,"import",a)):a.sName=a.sCode,a.sSlug=t.convert_to_param(a.sName),a.unqSels[a.sSlug])a.tmpfSlug=a.unqSels[a.sSlug].folder;else{a.tmpfSlug=!1,a.unqSels[a.sSlug]={code:a.sCode,name:a.sName,slug:a.sSlug,folder:a.fSlug},++a.selCount,++a.fSelCount,a.levels.push(a.fSlug,a.sSlug,"label"),"MQ"==i&&a.levels.splice(0,3),s.fill_object(n,a.levels,a.sName+"|"+a.sCode);var o=r.css_imp_friendly?a.sName:a.sCode;a.stats.selectors.push(o)}return t.endT(arguments),n},mq_exists:function(e,r){t.startT(arguments);for(var a in r)if(r[a].query==e)return a;return t.endT(arguments),!1},concat_import_styles:function(e){t.startT(arguments);var r=new RegExp("(@import(\\s)+(\"|')([\\w\\-. ]+))(\"|')(\\s)*;","g");s.recursive_import(e,r,"match");t.endT(arguments)},recursive_import:function(e,r,a){t.startT(arguments),t.endT(arguments)},get_import_opts:function(){t.startT(arguments);var r={};if(e("#imp-css-preview").find('input[type="radio"]:checked, input[type="checkbox"]:checked, input[type="text"]').each(function(){var t=e(this),a=t.attr("name").match(/\[(.*?)\]/);a&&a[1]&&(a=a[1],r[a]="radio"==t.attr("type")||"checkbox"==t.attr("type")?parseInt(t.val()):t.val())}),r.css_imp_styles&&!r.css_imp_sels)return alert(TvrLang.imp_sels_too),t.endT(arguments),!1;r.css_source=e("#stylesheet_to_import").val();var s=a.get_editor(e("#preview-import-css-0"));return r.css=r.css_imp_only_selected?s.getCopyText():s.getValue(),t.endT(arguments),r},update_view_css:function(r,n,i,o){if(t.startT(arguments),"loadNew"==i){var l=o.find("#scss-line-error");s.scssError=!!t.isDomEl(l)&&l.data("line"),s.stat.view.find("div.dialog-tab-field").each(function(t){var r=e(this).find("div.view-file").find("a").attr("href");s.simple_ajax_request({url:r,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:s.update_view_css,cbfArgs:[t]})})}else a.update_arbitrary_editor({context:"viewCSS",editorID:"generated-css-"+n,data:r,filterClass:"generated-css",readOnly:!0,directContent:r,index:n});t.endT(arguments)},update_inspector_stylesheet:function(e,r,n){t.startT(arguments),"loadNew"==n?s.simple_ajax_request({url:r.url,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:s.update_inspector_stylesheet,
cbfArgs:[r]}):a.update_arbitrary_editor({context:"inspectorStylesheet",editorID:"inspect_stylesheet_preview",data:e,filterClass:"inspect_stylesheet_preview",readOnly:!0,directContent:e,containerClass:".content-main",find:r}),t.endT(arguments)},ui_reset:function(e){t.startT(arguments);var r=confirm(TvrLang.reset_settings_confirm);if(!r)return!1;var a="reset",n=s.ajaxUrl,i=TvrLang.reset_empty_folders,o="GET",l="mt_action=tvr_ui_reset";s.general_ajax_submission(a,n,i,o,l),t.endT(arguments)},get_css_filter_alias:function(r,a){t.startT(arguments);var n=e("#css-filters"),i=s.pseudo_class_format(r.closest("li").data("pref_sub_key")),o=t.isDomEl(r.closest("#fav-filters"))?n.find("span.quick-opts-wrap"):e("#fav-filters"),l=o.find("li."+i);return"favourite_filter"!=a?l:l.find(".star-icon")},clear_css_filters:function(){t.startT(arguments),e("#css-filters").find("ul.css-filter-list").find("li.css-filter-item").each(function(t){var r=e(this);r.hasClass("on")&&s.toggle_feature(r)}),t.endT(arguments)},clear_styles:function(e,r,a){t.startT(arguments);var n=confirm(TvrLang.clear_styles_confirm);if(!n)return!1;var i="clear",o=s.ajaxUrl,l=TvrLang.clear_styles,c="GET",d="mt_action=tvr_clear_styles";s.general_ajax_submission(i,o,l,c,d),t.endT(arguments)},restore_rev:function(e){t.startT(arguments);var r=confirm(TvrLang.restore_settings_confirm);if(!r)return!1;var a="restore",n=s.ajaxUrl,i=TvrLang.restore_settings,o="GET",l=e.attr("rel");s.general_ajax_submission(a,n,i,o,l),t.endT(arguments)},set_typing_timer:function(){s.timer.typing&&clearTimeout(s.timer.typing),s.timer.typing=setTimeout(s.done_typing,s.doneTypingInterval)},extract_inner_styles:function(e){t.startT(arguments),e=e.slice(0,-1),e=e.split("{");var r=e[1]?e[1]:"";return r&&(e.shift(),r=e.join("{")),t.endT(arguments),r.trim()},post_edit:function(r){t.startT(arguments),r.each(function(t){var r=e(this);s.update_input_width(r),s.adjust_comp_span(r,"after")}),t.endT(arguments)},input_pre_save:function(e){t.startT(arguments);var r=s.get_meta(e,"property");e.hasClass("color")&&(s.adjust_comp_span(e,"after"),s.splice_sug_val(e.val(),!1,"color",{redrawPalette:1}));var n,i=s.maybe_set_unit(r,e);n=e.hasClass("tvr-editor-hidden")?a.editor_line(a.get_editor(e,!0),!0):e.val(),n=n?n:TvrLang.value_cleared;var o=i&&i.calc?i.calc:"",l=s.chain_is_on(r)||s.dblclickToSync?r.subgroupH+" "+TvrLang.fields_sync:"";s.dblclickToSync=!1;var c=o?"\n":"";o+=l?c+l:"",!s.skipInputHistory&&t.isDomEl(r.property)&&s.user_action({items:["property"],val:n,M:r,pathTT:!0,valTT:o,icon:r.property.find("span.option-icon").attr("class").replace("tvr-icon","")}),s.skipInputHistory=!1,s.check_feathers_after_prop_change(r);var d=[],u=-1;s.is_cur("sec",r.sectionSlug)&&s.is_dis(r.sectionM)&&(d[++u]=TvrLang.folder_disabled),s.is_cur("sel",r.selectorID)&&s.is_dis(r.selectorM)&&(d[++u]=TvrLang.selector_disabled);for(var u in d){var _={"short":d[u],"long":"<p>"+TvrLang.enable_with_icon+"</p>",type:"warning"};s.log(_)}t.endT(arguments)},get_default_unit:function(e){t.startT(arguments);var r=!1;return s.pref.my_props[e.groupSlug]&&s.pref.my_props[e.groupSlug].pg_props&&s.pref.my_props[e.groupSlug].pg_props[e.propertySlug]&&s.pref.my_props[e.groupSlug].pg_props[e.propertySlug].default_unit&&(r=s.pref.my_props[e.groupSlug].pg_props[e.propertySlug].default_unit),r},maybe_set_unit:function(e,r){t.startT(arguments);var a=r.val();if(!a)return t.endT(arguments),!1;var n=s.get_default_unit(e);if(t.hasValue(n)){a=a.trim().replace(/(\(.*?\))/g,function(e){return e.replace(/ /g,"")});var i={val:a,converted:!1,calc:""};if(a.indexOf(" ")<0)i=s.do_conversion(a,n,r,0);else{var o=[],l=a.split(" ");for(var c in l){var d=s.do_conversion(l[c],n,r,c);o[c]=d.val,d.converted&&(i.converted=!0,i.calc+=0!=c?", "+d.calc:d.calc)}i.val=o.join(" ")}return i.converted&&(r.val(i.val),s.update_input_width(r),s.maybe_sync_fields(r)),t.endT(arguments),i}},do_conversion:function(e,r,a,n){t.startT(arguments);var i={val:e,converted:!1,calc:""};if(t.isNumber(e)&&0!=e){if("px (implicit)"!=r&&r.indexOf(" to ")<0)i.val=e+r,i.converted=!0;else if(r.indexOf(" to ")>-1){var o=r.split(" to ");i=s.auto_convert(e,o[1],s.nodeCSS[0],a,e,n)}}else"="==e.charAt(0)&&(i=s.process_excel_function(e,a,n));return t.endT(arguments),i},process_excel_function:function(e,r,a){t.startT(arguments);var n={val:e,converted:!1,calc:""},i=e.split("(");if(!i[0]||!i[1]||i[1].indexOf(")")<0)return n;var o=i[0].replace("=",""),l=i[1].replace(")","").split(",");for(var c in l)if(l[c]=l[c].trim(),!t.isDefined(l[c]))return n;var d=s.nodeCSS[0];return l[1]&&(d=s.nodeCSS[l[1]-1]),t.endT(arguments),s.auto_convert(l[0],o,d,r,e,a)},auto_convert:function(r,a,n,i,o,l){t.startT(arguments);var c,d,u,_,p,f,g={val:o,converted:!1,calc:""},m=s.get_meta(i,"property"),v=m.propertySlug,h=!1,T=TvrMT.data.prog.autoMap;if(T[v]&&T[v][a]){if(!e.isPlainObject(T[v][a])&&!T[v][a][0]){var b={"short":"Auto-conversion aborted","long":"<p>"+T[v][a]+"</p>",type:"warning"};return s.log(b),t.endT(arguments),g}c=T[v][a].node,d=T[v][a].prop,e.isArray(d)&&(d=d[l]),d=d.replace(/_/g,"-"),u=parseInt(n[c][d].replace("px","")),t.hasValue(T[v][a].tip)&&(h="<p>"+T[v][a].tip+"</p>")}if("%"==a?(_=r/u*100,p=r+"px / "+u+"px * 100 = "+parseFloat(_.toFixed(3).toString())+a,f=r+"px divided by "+u+"px ("+c+" "+d+") multiplied by 100 = <b>"+_+a+"</b>"):"em"!=a&&"rem"!=a||(d="font-size","em"==a?(c="element","font_size"==v&&(c="parent"),u=parseInt(n[c]["font-size"].replace("px",""))):(c="HTML base",u=s.baseFontSize),_=r/u,p=r+"px / "+u+"px = "+parseFloat(_.toFixed(3).toString())+a,f=r+"px divided by "+u+"px ("+c+" "+d+") = <b>"+_+a+"</b>"),!_)return t.endT(arguments),g;var b={"short":p,"long":"<p>"+TvrLang.auto_conversion_performed+": <b>"+o+"</b><br />"+f+"<br />"+TvrLang.auto_values_rounded+"</p>",type:"info"};return h&&(b["long"]+=h),s.log(b),g={val:parseFloat(_.toFixed(3).toString())+a,converted:!0,calc:p},t.endT(arguments),g},update_interface_state:function(r){t.startT(arguments);var a;jQuery.each(jQuery.browser,function(e,t){a+=e+" : "+t+"\n"}),e("#error-report-form").find('textarea[name="tvr_php_error"]').val(r).end().find('textarea[name="tvr_serialised_data"]').val(e("#tvr-serialised-data").val()).end().find('textarea[name="tvr_browser_info"]').val(a),t.endT(arguments)},code_save_button:function(e){t.startT(arguments),e.hasClass("custom")?(s.user_action({items:[TvrLang.custom_code],val:a.editor_line(a.get_editor(e.closest(".mt-full-code").find("pre"))),icon:"option-icon option-icon-css",main_class:"icon-size-3"}),s.ajax_save_settings()):s.ajax_save_settings("",e.closest(".group-tag-code").find("textarea")),t.endT(arguments)},ajax_save_settings:function(a,n){if(t.startT(arguments),s.saveInProgress)return s.reSave=!0,s.inputWaitingObj=n,!1;s.saveInProgress=!0,s.update_prog_indicator("plus",TvrLang.save_settings),t.isDomEl(n)&&s.input_pre_save(n);var i=s.ajaxUrl+"&mt_action=mt_save_interface",o=s.serialized_data_with_single_key(e("#tvr_microthemer_ui_save, #microthemer_ui_settings_export").serialize());t.startT("save: start ajax post"),e.ajax({type:"POST",url:i,dataType:"json",jsonp:!0,data:o,timeout:s.tOut,error:function(e,r){t.startT(arguments),s.reSave=!1,s.update_prog_indicator("minus",{"short":TvrLang.save_settings_error,"long":"<p>"+s.handle_ajax_error(e,r)+"</p>"}),t.endT(arguments)},success:function(i){if(t.startT(arguments),t.endT("save: start ajax post",1),s.reSave)return t.startT("ajax resave"),s.reSave=!1,s.saveInProgress=!1,s.update_prog_indicator("minus",u,TvrLang.save_settings),s.ajax_save_settings("",s.inputWaitingObj),t.endT("ajax resave",1),!1;t.startT("save: process return data");var o=e(i.html),l=o.html(),c=e(l);if(null==l){var d=e("#log-item-template"),u={"short":d.find(".short").text(),"long":d.find(".long").html()};s.update_interface_state(i)}else{var u=s.extract_status(c);e("#script-feedback").html(o.find(".script-feedback")),s.uiData=i.uiData}if(s.update_prog_indicator("minus",u,TvrLang.save_settings,!0),t.endT("save: process return data",1),n&&n.hasClass("color")&&s.save_sug_vals({specific:"color"}),s.js_in_focus()?(t.startT("save: refreshJS"),s.update_prog_indicator("plus",TvrLang.refresh_js),r.refreshJS(),t.endT("save: refreshJS",1)):(t.startT("save: refreshCSS"),s.update_prog_indicator("plus",TvrLang.refresh_styles),s.g_url=e("#google-url-to-refresh").text(),s.iframe_functions_loaded()?r.refreshCSS():s.awaitingIframeReloadAfterSave=!0,t.endT("save: refreshCSS",1)),"view-css"==a&&s.update_view_css(!1,!1,"loadNew",c),"export"==a){var _=e("#sanit-export-name").text();_&&(s.update_packs_obj(t.readable_name(_)),e("#sanit-export-name").text(""));var p=e("#export-to-pack-dialog").find("span.export-dialog-button");s.reload_manage_iframe(p),s.show_dialog(e("#v-left-controls").find("li.item-manage-design-packs"))}t.endT(arguments)},complete:function(r,a){t.startT(arguments),t.startT("save: complete"),s.saveInProgress=!1,e("#user-action").text(""),e("#custom-css-js").removeClass("changed"),t.endT("save: complete",1)}}),t.endT(arguments)},serialized_data_with_single_key:function(r){return r=t.escape_backslashes(r,!0),e("#tvr-serialised-data").val(r),e("#tvr_microthemer_ui_serialised").serialize()},update_packs_obj:function(e){TvrMT.data.prog.combo.directories[TvrMT.data.prog.combo.directories.length]=e,TvrMT.data.prog.combo.directories.sort()},set_import_field:function(t){e("#import_from_pack_name").val(t)},handle_ajax_error:function(e,t){return 0==e.status?TvrLang.error_connection:404==e.status?TvrLang.error_404:500==e.status?TvrLang.error_500:"parsererror"==t?TvrLang.error_parser:"timeout"==t?TvrLang.error_timeout:TvrLang.error_unknown+"\n"},email_error_report:function(){t.startT(arguments),s.update_prog_indicator("plus",TvrLang.send_error);var r=s.ajaxUrl+"&mt_action=tvr_error_email",a=e("#error-report-form").serialize();e.ajax({type:"POST",url:r,data:a,timeout:s.tOut,error:function(e,t){s.update_prog_indicator("minus",{"short":TvrLang.send_error_failed,"long":"<p>"+s.handle_ajax_error(e,t)+"</p>"},TvrLang.send_error)},success:function(r){t.startT(arguments);var a=e(r),n=a.html();if(null==n)var i={"short":"Email report failed","long":"<p>Reason unknown.</p>"};else var i=s.extract_status(e(n));s.update_prog_indicator("minus",i,TvrLang.send_error)}}),t.endT(arguments)},show_dialog:function(r){t.startT(arguments),s.close_dialog(),r=r.attr("rel")?r:r.closest("*[rel]");var a=r.attr("rel");if("not-yet"==a)return!1;if(e("#"+a+"-dialog").addClass("show"),"import-from-pack"==a&&(t.hasValue(r.attr("data-pack-name"))&&e("#import_from_pack_name").val(r.attr("data-pack-name")),e("#preview-import-css-0").hasClass("ace_editor")||s.update_import_css_editor("")),"export-to-pack"==a){var n="";e("#tvr-menu").find(".section-tag").each(function(){var t=s.get_meta(e(this),"section"),r=parseInt(t.sectionM.find(".selector-count-state").attr("rel")),a="",i="";r>0&&(a='checked="checked"',i="on"),n+='<li><input type="checkbox" name="export_sections['+t.sectionSlug+']" '+a+' /> <span class="fake-checkbox '+i+'"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+t.sectionH+"</span></li>"}),e("#available-folders").html(n);var i=e("#custom-css");s.stat.code.find("textarea.hand-css-textarea").each(function(r){var a=e(this),s=i.find(".custom-"+a.attr("id"));t.hasValue(a.val())?t.check_fake(s):t.uncheck_fake(s)}),e("#export_to_pack").val(1),e("#export_pack_name").val(""),e("#toggle-checked-folders").find("input").prop("checked",!1).end().find(".fake-checkbox").removeClass("on")}if("display-css-code"==a){var o=e("#scss-line-error"),l=t.isDomEl(o)?s.title(o):s.title(r.find(".mt-menu-text"));s.user_action({items:[l],val:!1,icon:"display-css-code lg-icon"}),s.default_to_tab("view-css"),s.ajax_save_settings("view-css")}if("inspect-stylesheet"==a){var c={url:r.data("href"),media:r.data("media"),selector:r.data("selector")};s.update_inspector_stylesheet(!1,c,"loadNew")}"display-revisions"==a&&s.ajax_load_revisions_table(),"manage-design-packs"==a&&s.reload_manage_iframe(r),"program-docs"!=a&&"get-started-tips"!=a||s.reload_docs_iframe(r),t.endT(arguments)},close_dialog:function(){t.startT(arguments),e("#tvr").find("div.tvr-dialog").removeClass("show"),e("#export_to_pack, #new_pack").val(0),t.endT(arguments)},reload_docs_iframe:function(r){t.startT(arguments);var a="docs_iframe",s=e("#docs-url").attr("rel");t.hasValue(r.attr("data-docs-index"))&&(s+="&docs_index=1"),t.hasValue(r.attr("data-prop-group"))&&(s+="&prop_group="+r.attr("data-prop-group")),t.hasValue(r.attr("data-prop"))&&(s+="&prop="+r.attr("data-prop"));e("#"+a);window.frames[a].location=s,t.endT(arguments)},reload_manage_iframe:function(r){t.startT(arguments);var a="manage_iframe",s=e("#"+a),n=s.attr("rel");(1!=s.attr("data-frame-loaded")||t.isDomEl(r.closest(".dialog-footer")))&&(window.frames[a].location=n,s.attr("data-frame-loaded",1)),t.endT(arguments)},toggle_help_info:function(e){e.next().slideToggle("fast",function(){})},scroll_to_bottom:function(e){t.startT(arguments)},toggle_multi_checkboxes:function(r){t.startT(arguments);var a=e("#available-folders, #custom-css");r.hasClass("on")?a.find("input").prop("checked",!1).end().find(".fake-checkbox").add(r).removeClass("on"):a.find("input").prop("checked",!0).end().find(".fake-checkbox").add(r).addClass("on"),t.endT(arguments)},rel_to_absolute:function(e,r){if(t.startT(arguments),t.has_protocol(r))return r;if("/"==r.trim().charAt(0))return t.get_root_domain(e)+r;var a=e.split("/"),s=r.split("/");a.pop();for(var n=0;n<s.length;n++)"."!=s[n]&&(".."==s[n]?a.pop():a.push(s[n]));return t.endT(arguments),a.join("/")},parse_css:function(e,r){t.startT(arguments);try{var a=window.TvrParser.parse(e,{silent:r});return t.endT(arguments),a}catch(n){return s.update_full_logs({"short":TvrLang.css_parse_error,"long":"<p>"+TvrLang.css_parse_error_long+". </p><p>"+n.message+".</p>"}),alert(TvrLang.css_parse_error+"\n"+TvrLang.css_parse_error_long+"\n"+n.message+"\n"),t.endT(arguments),!1}},maybe_auto_adjust_path:function(e,r,a){if(t.startT(arguments),(e.css_imp_adjust_paths||e.css_imp_copy_remote)&&("import"==a||r.indexOf("url")>-1)){var n;n="import"==a&&r.indexOf("url")<0?s.reg.quoted({inside:1}):s.reg.url({inside:1});var i=r.replace(new RegExp(n,"ig"),function(r,a,n){var i=s.rel_to_absolute(e.css_source,a);if(e.css_imp_copy_remote&&t.is_image(i)){var o=e.css_imp_adjust_paths?i:a;s.remoteImages[o]=i}return r.replace(a,i)});return t.endT(arguments),e.css_imp_adjust_paths?i:r}return t.endT(arguments),r},stringify_sub:function(e,r){t.startT(arguments);var a="";if(e)for(var n in e)a+=s.stringify_css(e[n],r);return t.endT(arguments),a},stringify_brackets:function(e,r,a){t.startT(arguments);var n=(a.tab,"");return n+=a.tab+e+" {\n",a.tab=s.tabDepth[++a.depth],n+=s.stringify_sub(r,a),a.tab=s.tabDepth[--a.depth],n+=a.tab+"}\n",t.endT(arguments),n},stringify_at:function(e){return"@"+e.type+" "+e[e.type]+";"},tabDepth:["","\t","\t\t","\t\t\t"],stringify_css:function(e,r){if(t.startT(arguments),r.singleNode){var a="",n=e;switch(n.type){case"rule":a+=s.stringify_brackets(n.selectors.join(", \n"),n.declarations,r);break;case"font-face":a+=s.stringify_brackets("@"+n.type,n.declarations,r);break;case"declaration":return n.value=s.maybe_auto_adjust_path(r.opts,n.value,n.type),r.tab+n.property+": "+n.value+";\n";case"keyframes":a+=s.stringify_brackets("@"+n.type+" "+n.name,n.keyframes,r);break;case"keyframe":a+=s.stringify_brackets(n.values.join(", ").trim(),n.declarations,r);break;case"media":a+=s.stringify_brackets("@"+n.type,n.rules,r);break;case"supports":a+=s.stringify_brackets("@"+n.type+" "+n.supports,n.rules,r);break;case"document":a+=s.stringify_brackets("@"+n.type+" "+n.document,n.rules,r);break;case"page":a+=s.stringify_brackets("@"+n.type,n.declarations,r);break;case"charset":return s.stringify_at(n);case"import":return n[n.type]=s.maybe_auto_adjust_path(r.opts,n[n.type],n.type),s.stringify_at(n);case"namespace":return s.stringify_at(n)}return t.endT(arguments),a}var i=window.TvrParser.stringify(e,r);return t.endT(arguments),i},import_settings:function(){t.startT(arguments);var r=e("#import-from-pack-dialog");if(1==s.get_dialog_tab_focus(r)){var a="CSS Stylesheet";if(!s.process_css_import(0,"do-import"))return!1}else{if(""==e("#import_from_pack_name").val())return alert(TvrLang.select_design_pack),!1;if(!e("#ui-import-overwrite").is(":checked")&&!e("#ui-import-merge").is(":checked"))return alert(TvrLang.choose_import_method),!1;var a=e("#ui-import-overwrite").is(":checked")?"overwrite":"merge";e("#stylesheet_import_json").val("")}var n="import",i=s.ajaxUrl,o=tvrsprintf(TvrLang.import_settings,a),l="POST",c=e("#microthemer_ui_settings_import").find("input, textarea").not(".dont-serialize").serialize();s.general_ajax_submission(n,i,o,l,c),t.endT(arguments)},save_preferences:function(r){t.startT(arguments);var a="Preferences save",n=s.ajaxUrl,i=TvrLang.saving_preferences,o="POST",l=t.escape_backslashes(e("#tvr-preferences").serialize(),!0);s.general_ajax_submission(a,n,i,o,l),t.endT(arguments)},save_media_queries:function(r){t.startT(arguments);var a="Media query save",n=s.ajaxUrl,i=TvrLang.saving_mqs,o="POST",l=t.escape_backslashes(e("#edit-media-queries-form").serialize(),!0);s.general_ajax_submission(a,n,i,o,l),t.endT(arguments)},save_enq_js:function(r){t.startT(arguments);var a="Script enqueue",n=s.ajaxUrl,i=TvrLang.saving_enqjs,o="POST",l=t.escape_backslashes(e("#mt-enqueue-js").serialize(),!0);s.general_ajax_submission(a,n,i,o,l),t.endT(arguments)},simple_ajax_request:function(r){t.startT(arguments),s.update_prog_indicator("plus",r.plus);var a=r.url.indexOf("?")>-1?"&":"?";r.url+=a+"nocache="+(new Date).getTime(),e.ajax({type:r.type?r.type:"GET",url:r.url,data:r.sendData?r.sendData:"",dataType:r.dataType?r.dataType:"text",async:!r.async||r.async,timeout:r.timeout?r.timeout:s.tOut,error:function(e,t){s.update_prog_indicator("minus",{"short":r.minus,"long":"<p>"+s.handle_ajax_error(e,t)+"</p>"},r.plus)},success:function(e){t.startT(arguments),r.cbFunction&&(r.cbfArgs.unshift(e),r.cbFunction.apply(this,r.cbfArgs)),s.update_prog_indicator("minus",!1,r.plus)}}),t.endT(arguments)},general_ajax_submission:function(r,a,n,i,o){t.startT(arguments),s.update_prog_indicator("plus",n),e.ajax({type:i,url:a,data:o,timeout:s.tOut,error:function(e,a){t.startT(arguments),s.update_prog_indicator("minus",{"short":r+" error","long":"<p>"+s.handle_ajax_error(e,a)+"</p>"},n),s.close_dialog()},success:function(e){t.startT(arguments),window.location=s.uiUrl}}),t.endT(arguments)},export_settings:function(r){t.startT(arguments);var a=e("#export_pack_name").val();if(!a)return alert(TvrLang.select_settings_pack),!1;var n=a.toLowerCase(),i=!1;for(var o in TvrMT.data.prog.combo.directories)if(TvrMT.data.prog.combo.directories[o].toLowerCase()==n){i=!0;break}i||e("#new_pack").val(1),s.user_action({items:[s.title(r)],val:a,icon:"export-to-pack lg-icon"}),s.ajax_save_settings("export"),t.endT(arguments)},get_dyn_meta:function(e){t.startT(arguments);var r=e.closest(".dyn-wrap");s.dyn_meta={wrap:r,slug:r.data("slug"),add_input:r.find(".new-item-input"),add_button:r.find(".new-item-add"),menu:r.find(".tvr-dyn-menu")};var a=e.closest("li.dyn-item");return t.isDomEl(a)&&(s.dyn_meta.item=a),s.dyn_meta},dyn_add_item:function(r){t.startT(arguments);var a=s.get_dyn_meta(r),n=a.add_input.val(),i=a.wrap.data("base-key");if(i){i+=a.menu.find("li.dyn-item").length+1;var o={newName:i,newNameHuman:n}}else{var o=t.new_name_checks(n,TvrLang.item);if(!o)return!1}var l=s.dom_replacements("dyn_item",e("#"+a.slug+"-item").clone(),"item",o.newName,o.newNameHuman);a.menu.append(l).find("li").filter(":last").hide().fadeIn("fast",function(){a.add_input.val(""),"mqs"==a.slug&&s.toggle_edit_item(e(this).find(".edit-item"))}),t.endT(arguments)},toggle_edit_item:function(e){t.startT(arguments);var r=s.get_dyn_meta(e),a=r.item.find(".edit-item-form");a.hasClass("show")?a.removeClass("show"):a.addClass("show"),t.endT(arguments)},delete_item:function(r){t.startT(arguments),r.closest("li").fadeOut("slow",function(){e(this).remove()}),t.endT(arguments)},reveal_form_opts:function(e){t.startT(arguments);var r=e.attr("rel"),a=e.closest("li").siblings(".hidden."+r);a.hasClass("show")?a.removeClass("show"):a.addClass("show"),t.endT(arguments)},toggle_system_menu_options:function(e){t.startT(arguments),e=e.closest("li");var r=e.find(".tvr-input-wrap"),a=e.find(".mt-menu-text"),s=e.closest("ul");r.hasClass("show")?(a.text(a.data("ll")),s.removeClass("expanded"),r.removeClass("show")):(a.text(a.data("sl")),s.addClass("expanded"),r.addClass("show")),t.endT(arguments)},change_preview_url:function(e){t.startT(arguments),s.update_prog_indicator("plus",TvrLang.load_wp);var r=e.closest("li"),a=t.extract_url_path(r.find("input").val()),n=t.rtrim(s.siteUrl,"/")+a;window.frames.viframe.location=n,s.toggle_system_menu_options(r.find(".menu-input-toggle")),t.endT(arguments)},toggle_folder:function(e){t.startT(arguments);var r=s.get_meta(e,"section");r.sectionM.find(".menu-arrow").hasClass("on")?s.close_folder(r):s.open_folder(r),t.endT(arguments)},open_folder:function(e){t.startT(arguments),e.sectionM.addClass("is-open").find(".menu-arrow").addClass("on"),e.sectionM.find("ul.selector-sub").addClass("normal"),t.endT(arguments)},close_folder:function(e){t.startT(arguments),e.sectionM.removeClass("is-open").find(".menu-arrow").removeClass("on"),e.sectionM.find("ul.selector-sub").removeClass("normal"),t.endT(arguments)},update_editor_refs:function(r,s,n,i,o,l){t.startT(arguments);var c="section"==r?n:n+"-"+o,d="section"==r?i:i+"-"+l;s.find("pre.custom-css-pre").each(function(){var t=e(this),r=t.attr("id");if(a.eds[t.attr("id")]){var s=r.replace(c,d);s!=r&&(a.eds[s]=a.eds[r],delete a.eds[r],a.eds[s+"OpeningRange"]=a.eds[r+"OpeningRange"],a.eds[s+"ClosingRange"]=a.eds[r+"ClosingRange"],delete a.eds[r+"OpeningRange"],delete a.eds[r+"ClosingRange"])}}),t.endT(arguments)},dom_replacements:function(r,a,n,i,o,l,c,d,u,_){if(t.startT(arguments),"section"!=r&&"selector"!=r||s.update_editor_refs(r,a,n,i,l,c),"section"==r&&(a.find("input, textarea.property-input").each(function(r){var a=e(this);t.hasValue(a.attr("name"))&&a.attr("name",a.attr("name").replace("tvr_mcth["+n+"]","tvr_mcth["+i+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+i+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+i+"]"))}),a.find(".section-name .name-text").text(o),a.find(".section-display-name").val(o),a.find(".rename-input").val(o),a.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(a).each(function(){var t=e(this);t.attr("id",t.attr("id").replace(n,i))})),"selector"==r&&(a.find(".selector-name").attr("title",t.regular_escape_quotes(u)),a.find(".selector-name .name-text").text(d),a.find(".selector-label").val(d+"|"+u),a.find(".selector-name-input").val(d),a.find(".selector-css-textarea").val(u)),"group"==r&&(a.removeAttr("id"),a.attr("class",a.attr("class").replace("property-fields-all-devices","property-fields-"+_)),"all-devices"!=_&&a.find("input.property-input, textarea.property-input, input.disabled-tracker, input.chained-tracker").each(function(t){var r=e(this);r.attr("name",r.attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+_+"]"))}).end().find("div.property-tag, div.subgroup-tag, pre.custom-css-pre").each(function(){var t=e(this);t.attr("id",t.attr("id").replace("-all-devices","-"+_))})),"selector"!=r&&"group"!=r||(a.find("div.sel-code-alias").text(u),a.find("input, textarea.property-input").each(function(r){var a=e(this);t.hasValue(a.attr("name"))&&a.attr("name",a.attr("name").replace("tvr_mcth["+n+"]["+l+"]","tvr_mcth["+i+"]["+c+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+i+"]["+c+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+i+"]["+c+"]"))}),a.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(a).each(function(){try{var t=e(this);t.attr("id",t.attr("id").replace(n+"-"+l,i+"-"+c))}catch(r){}})),"dyn_item"==r){var p=n,f=i,g=o;a.attr("id",a.attr("id").replace(p,f)),a.find("input, textarea").each(function(){var t=e(this);t.attr("name",t.attr("name").replace("["+p+"]","["+f+"]"))}),a.find(".script-display_name, .mquery-label").val(g),a.find(".name-text").text(g)}return t.endT(arguments),a},add_section:function(r,a){t.startT(arguments);var n=!1;a||(a=TvrLang.untitled_folder,n=!0),a=t.resolve_unique_name(a,e("#tvr-menu"),".section-name");var i=s.dom_replacements("section",e("#strk-selector_section").add(e("#opts-selector_section")).clone(),"selector_section",t.convert_to_param(a),a);e("#tvr-options").append(i[1]);var o=e("#tvr-menu");o.append(i[0]);var l=o.find("li.section-tag").filter(":last");l.hide().fadeIn("fast",function(){var t=e("#section-count-state");s.update_count(t,"add",1,"section"),n&&(s.toggle_rename_section(l.find("span.toggle-rename-section")),l.find("input.rename-input").select())}),t.refresh_sortable();o.closest(".menu-scrollable");return t.scroll_to(e("#main-menu-popdown"),{bottom:!0}),s.user_action({items:[a],val:s.title(r),icon:[{icon:s.hi.section},{icon:"add-icon tvr-icon"}]}),s.ajax_save_settings(),t.endT(arguments),!0},load_section_selectors:function(r,a){t.startT(arguments);var n=r.sectionM.find('input.selector-tracker[value="0"]');return s.selsToLoad=n.length,s.totalToLoad=s.selsToLoad,s.selsToLoad>0?!!s.action_in_prog(r.sectionM,"all-sels-loading")||(s.log_action(r.sectionM,"all-sels-loading"),s.com_data_loading(r.sectionM,"sec",a),n.each(function(){r=s.get_meta(e(this),"selector"),s.ajax_load_ui_data(r.selector,r.sectionM,r.selectorT,r.sectionSlug,r.selectorSlug,"selector",3,a)}),t.endT(arguments),!0):(t.endT(arguments),!1)},toggle_rename_section:function(e){t.startT(arguments);var r=s.get_meta(e,"section");if(!s.action_in_prog(r.sectionM,"rename")&&!s.action_in_prog(r.sectionM,"data-load")&&!s.load_section_selectors(r,TvrLang.sec_rename)){s.log_action(r.sectionM,"rename");var r=s.get_meta(e,"section"),a=r.sectionM.find(".edit-section-form"),n=r.sectionM.find(".section-name");a.hasClass("show")?(n.show(),a.removeClass("show")):(n.hide(),a.addClass("show")),s.unlog_action(r.sectionM,"rename")}t.endT(arguments)},action_rename_section:function(r){t.startT(arguments);var a=s.get_meta(r,"section"),n=a.sectionM.find(".rename-input").val();if(t.convert_to_param(n)==a.sectionSlug){var i=[];i.newName=a.sectionSlug,i.newNameHuman=n}else{var i=t.new_name_checks(n,"folder");if(!i)return!1}var o=a.sectionM.find("input.section-display-name").val(),l=i.newName,c=i.newNameHuman,d=a.sectionSlug,u=a.sectionM.add(a.section);s.dom_replacements("section",u,d,l,c),a=s.get_meta(e("#strk-"+l),"section"),s.toggle_rename_section(a.sectionM),s.selInFocusID.indexOf("opts-"+d)>=0&&s.update_global_vars(s.get_meta(a.section.find("li.in-focus"),"selector"));var _="";o!=c&&(_+=TvrLang.previous_name+": "+o+"\n",_+=TvrLang.new_name+": "+c),s.user_action({items:["section"],val:s.title(r),M:a,valTT:_,icon:[{icon:s.hi.section},{icon:"edit-icon tvr-icon"}]}),s.ajax_save_settings(),t.endT(arguments)},copy_section:function(r){t.startT(arguments);var a=s.get_meta(r,"section");if(!s.action_in_prog(a.sectionM,"copy")&&!s.load_section_selectors(a,TvrLang.sec_copy)){s.log_action(a.sectionM,"copy");var n=t.resolve_unique_name(a.sectionH,e("#tvr-menu"),".section-name","Copy"),i=s.dom_replacements("section",s.proper_clone(a.section.add(a.sectionM)),a.sectionSlug,t.convert_to_param(n),n);i.removeAttr("copy-in-prog").find("li.in-focus").removeClass("in-focus"),i.find("img.ajax-loader").remove(),a.sectionM.after(i[0]),a.section.after(i[1]);var o=e("#section-count-state"),l=a.sectionM.find("span.selector-count-state").attr("rel");s.update_count(o,"add",1,"section",l),s.unlog_action(a.sectionM,"copy"),t.hasValue(s.selInFocusID)&&s.update_prev_next_sel_buttons(e("#"+s.selInFocusID)),t.refresh_sortable(),s.user_action({items:["section"],val:s.title(r),M:a,valTT:n,icon:r.attr("class")}),s.ajax_save_settings()}t.endT(arguments)},action_in_prog:function(e,r){return!!t.hasValue(e.attr(r+"-in-prog"))},log_action:function(e,t){e.attr(t+"-in-prog",1)},unlog_action:function(e,t){e.removeAttr(t+"-in-prog")},delete_section:function(r){t.startT(arguments);var a=s.get_meta(r,"section");return!s.action_in_prog(a.sectionM,"delete")&&!s.action_in_prog(a.sectionM,"all-sels-loading")&&(s.log_action(a.sectionM,"delete"),a.sectionM.fadeOut("fast",function(){var n=a.sectionM.find("span.selector-count-state").attr("rel");s.update_count(e("#section-count-state"),"subtract",1,"section",n);var i=t.hasValue(s.selInFocusID)&&s.is_cur("sec",a.sectionSlug);i&&s.expanded("quick_section")&&s.close_quick_edit();var o=s.selectorTrackerScan(a.sectionM,"next");if(t.isDomEl(o)||(o=s.selectorTrackerScan(a.sectionM,"prev")),a.section.remove(),a.sectionM.remove(),i&&t.isDomEl(o)){var l=s.get_meta(o,"selector");s.tvr_iterate_selectors_v(l.selectorT)}s.user_action({items:["section"],val:s.title(r),M:a,icon:r.attr("class")}),s.ajax_save_settings()}),void t.endT(arguments))},toggle_add_selector:function(e){t.startT(arguments);var r=s.get_meta(e,"section"),a=r.sectionM.find(".add-selector-form");a.hasClass("show")?s.close_add_selector(a):s.reveal_add_selector(a),t.endT(arguments)},reveal_add_selector:function(e){t.startT(arguments);var r=s.get_meta(e,"section");e.addClass("show"),r.sectionM.find(".menu-arrow").hasClass("on")||s.toggle_folder(r.sectionM),t.endT(arguments)},close_add_selector:function(e){t.startT(arguments),e.removeClass("show"),e.find("input.selector-css-textarea, input.selector-name-input").val(""),t.endT(arguments)},selector_checks_values:function(e,r,a){t.startT(arguments);var s=e.val();if(""==s)return alert(TvrLang.enter_selector_name),!1;if(t.convert_to_param(s)==a){var n=[];n.newName=a,n.newNameHuman=s}else{var n=t.new_name_checks(s,"selector");if(!n)return!1}return r?(n.code=r,t.endT(arguments),n):(alert(TvrLang.enter_css),!1)},show_hide_sel_custom:function(e,r){t.startT(arguments);var a=s.analyse_sel_code(e);a.custom_styles?r.addClass("custom-styles"):r.removeClass("custom-styles"),t.endT(arguments)},analyse_sel_code:function(e){t.startT(arguments);var r=[];if(e.indexOf("{")>=0){r.custom_styles=!0;var a=e.split("{");r.code=a[0]}else r.custom_styles=!1,r.code=e;return t.endT(arguments),r},add_selector:function(r){if(t.startT(arguments),!s.allowed_action(r,"Add Sel"))return!1;var a=s.get_meta(r,"section"),n=s.selector_checks_values(a.sectionM.find(".add-selector-form .selector-name-input"),a.sectionM.find(".add-selector-form .selector-css-textarea").val(),!1);if(!n)return!1;var i=s.dom_replacements("selector",e("#strk-selector_section-selector_css").add(e("#opts-selector_section-selector_css")).clone(),"selector_section",a.sectionSlug,a.sectionM.find(".name-text").text(),"selector_css",n.newName,n.newNameHuman,n.code);i.find(".view-state-input").val(1),a.sectionM.find(".selector-sub").append(i[0]),a.section.find(".opts-selectors-sub").append(i[1]),s.update_count(a.sectionM.find(".selector-count-state"),"add",1,"selector","");var o=!1;return s.expanded("quick_section")&&(o=!0,s.close_quick_edit()),a=s.get_meta(a.section.find(".selector-tag").last(),"selector"),s.tvr_iterate_selectors_v(a.selectorT),s.maybe_default_to_pg(a.selector),t.refresh_sortable(),s.show_hide_sel_custom(n.code,a.selectorM.find(".selector-name")),s.close_add_selector(a.sectionM.find(".add-selector-form")),s.meta.sectionM.find(".add-selector-form").find(".selector-name-input, .selector-css-textarea").val(""),s.expanded("quick_selector")&&s.close_quick_edit(),o&&s.quick_edit(e("#sec-in-focus")),s.user_action({items:["selector"],val:s.title(r),M:a,pathTT:!0,icon:[{icon:s.hi.selector},{icon:"add-icon tvr-icon"}]}),s.ajax_save_settings(),t.endT(arguments),!0},load_selector:function(e,r){
return t.startT(arguments),0!=e.selectorT.val()||s.action_in_prog(e.selectorM,"data-load")?(t.endT(arguments),!1):(s.com_data_loading(e.selectorM,"sel",r),s.ajax_load_ui_data(e.selector,e.selectorM,e.selectorT,e.sectionSlug,e.selectorSlug,"selector",1,r),t.endT(arguments),!0)},toggle_modify_selector:function(e){t.startT(arguments);var r=s.get_meta(e,"selector");if(!s.action_in_prog(r.selectorM,"rename")&&!s.action_in_prog(r.selectorM,"data-load")&&!s.load_selector(r,TvrLang.load_before_modifying)){s.log_action(r.selectorM,"rename");var a=r.selectorM.find(".edit-selector-form");a.hasClass("show")?(a.removeClass("show"),s.expanded("quick_selector")&&s.close_quick_edit()):a.addClass("show"),s.unlog_action(r.selectorM,"rename")}t.endT(arguments)},action_modify_selector:function(n){t.startT(arguments);var i=s.get_meta(n,"selector"),o=s.selector_checks_values(i.selectorM.find(".selector-name-input"),i.selectorM.find(".selector-css-textarea").val(),i.selectorSlug);if(!o)return!1;var l=i.selectorM.find(".selector-label").val().split("|"),c=l[0],d=l[1],u=o.newName,_=o.newNameHuman,p=i.sectionSlug,f=i.selectorM.add(i.selector);s.dom_replacements("selector",f,p,p,i.sectionH,i.selectorSlug,u,_,o.code);s.is_cur("sel",i.selectorID)&&(s.expanded("quick_selector")&&s.close_quick_edit(),s.update_global_vars(s.get_meta(i.section.find("li.in-focus"),"selector")),i.selector.find("pre.ace_editor").each(function(){var t=e(this);a.set_editor_content(t,a.eds[t.attr("id")],{M:i})})),s.show_hide_sel_custom(o.code,i.selectorM.find(".selector-name")),s.curSelCSS=t.custom_escape_quotes(o.code),!s.el_selected&&s.iframe_functions_loaded()&&r.reposition_overlays({con:"reg"}),i=s.get_meta(n,"selector");var g="";return c!=_&&(g+=TvrLang.previous_name+": "+c+"\n",g+=TvrLang.new_name+": "+_),d!=o.code&&(g+=g?"\n":"",g+=TvrLang.previous_code+": "+d+"\n",g+=TvrLang.new_code+": "+o.code),s.user_action({items:["selector"],val:s.title(n),M:i,valTT:g,pathTT:!0,icon:[{icon:s.hi.selector},{icon:"edit-icon tvr-icon"}]}),s.ajax_save_settings(),s.toggle_modify_selector(i.selectorM),t.endT(arguments),!0},proper_clone:function(r){t.startT(arguments);var a=r.clone();return a.find("div.sp-replacer, div.sp-container").remove(),a.find("input.color.bound").removeClass("bound"),s.colorpicker_bind(a),a.find("pre.custom-css-pre").each(function(){var t=e(this);t.removeClass("ace_editor").html("")}),t.endT(arguments),a},copy_selector:function(r){if(t.startT(arguments),!s.allowed_action(r,"Add Sel"))return!1;var a=s.get_meta(r,"selector");if(!s.action_in_prog(a.selectorM,"copy")&&!s.action_in_prog(a.selectorM,"data-load")&&!s.load_selector(a,TvrLang.load_before_copying)){s.log_action(a.selectorM,"copy");var n=t.resolve_unique_name(a.selectorH,a.sectionM,".selector-name","Copy"),i=s.dom_replacements("selector",s.proper_clone(a.selector.add(a.selectorM)),a.sectionSlug,a.sectionSlug,a.sectionH,a.selectorSlug,t.convert_to_param(n),n,a.selectorM.find(".selector-css-textarea").val());i.removeClass("in-focus").removeAttr("copy-in-prog").find("img.ajax-loader").remove(),a.selectorM.after(i[0]),a.selector.after(i[1]),s.update_count(a.sectionM.find(".selector-count-state"),"add",1,"selector",""),s.unlog_action(a.selectorM,"copy"),t.hasValue(s.selInFocusID)&&s.update_prev_next_sel_buttons(e("#"+s.selInFocusID)),s.user_action({items:["selector"],val:s.title(r),M:a,pathTT:!0,valTT:n,icon:r.attr("class")}),s.ajax_save_settings()}t.endT(arguments)},delete_selector:function(e){t.startT(arguments);var r=s.get_meta(e,"selector");return!s.action_in_prog(r.selectorM,"delete")&&!s.action_in_prog(r.selectorM,"data-load")&&(s.log_action(r.selectorM,"delete"),r.selectorM.fadeOut("fast",function(){var a=t.hasValue(s.selInFocusID)&&s.is_cur("sel",r.selectorID);a&&s.expanded("quick_selector")&&s.close_quick_edit(),s.update_count(r.sectionM.find(".selector-count-state"),"subtract",1,"selector","");var n=s.selectorTrackerScan(r.sectionM,"next","selector",r.selectorM);if(t.isDomEl(n)||(n=s.selectorTrackerScan(r.sectionM,"prev","selector",r.selectorM)),r.selector.remove(),r.selectorM.remove(),s.section_check_values(r.section,!0),a)if(t.isDomEl(n)){var i=!0,o=s.get_meta(n,"selector");s.tvr_iterate_selectors_v(o.selectorT)}else var i=!1;i||s.update_prev_next_sel_buttons(!1),s.user_action({items:["selector"],val:s.title(e),M:r,pathTT:!0,icon:[{icon:s.hi.selector},{icon:e.attr("class")}]}),s.ajax_save_settings()}),void t.endT(arguments))},add_property_group:function(r,a){t.startT(arguments);var n=s.get_meta(r,"group"),i=s.dom_replacements("group",e("#option-group-template-"+n.groupSlug).clone(),"selector_section",n.sectionSlug,n.sectionM.find(".name-text").text(),"selector_css",n.selectorSlug,n.selectorH,n.selectorM.find(".selector-css-textarea").val(),a).addClass("show");n.group.append(i),t.endT(arguments)},remove_property_group:function(e,r){t.startT(arguments);var a=e.group.find("div.property-fields-"+r);return a?(a.remove(),t.endT(arguments),!0):(t.endT(arguments),!1)},update_accordion:function(e,a){t.startT(arguments);var n=a.find("li.accordion-item"),i=e.parent(),o=i.hasClass("property-menu");if(i.hasClass("show-content"))var l=!0;if(a.find(".accordion-menu-arrow.on").removeClass("on"),n.length?n.slideUp(function(){a.find(".show-content").removeClass("show-content")}):a.find(".show-content").removeClass("show-content"),l)return t.endT(arguments),!1;o&&(s.pgInFocusWiz=i.attr("id").replace("comp-",""),t.isDomEl(r.triggerEl)&&(r.get_computed_styles(r.triggerEl,"obj",!0),s.refresh_wizard_comp_css())),i.find(".accordion-menu-arrow").addClass("on");var c=e.siblings("li.accordion-item");return c.length?e.siblings("li.accordion-item").slideDown(function(){i.addClass("show-content")}):i.addClass("show-content"),t.endT(arguments),!1},pg_icon_pressed:function(a){if(t.startT(arguments),!s.allowed_action(a,"Edit Sel"))return!1;var n=s.get_mq_focus(),i=n,o=s.get_pg_focus_obj(),l=s.pgInFocus=a.attr("rel"),c=s.get_pg_focus_obj(),d=s.get_meta(c,"group");e.get(s.ajaxUrl+"&pg_focus="+l,function(){}),s.get_group(d)||s.add_property_group(d.group,n);var u=d.selector.find(".styling-options"),_=".group-tag",p=d.selector.find(".styling-option-icons"),f=".pg-icon",g=".pg-focus",m=l;s.update_tab(u,_,p,m,f,g),s.iframe_functions_loaded()&&r.get_computed_styles(s.curSelCSS,"str"),s.after_tab_switch(d,o,i,c,n),s.refresh_comp_css(),s.toolbar_adjusted(),t.endT(arguments)},clear_data_level:function(r){t.startT(arguments);var a,n=r.attr("data-input-level"),i="tab"==n?s.get_meta(e("#"+s.selInFocusID),"selector"):s.get_meta(r,n);if("section"==n||"selector"==n){if("section"==n)var o=i.sectionM,l=i.section;else var o=i.selectorM,l=i.selector;s.action_in_prog(o,"clear")||s.action_in_prog(o,"data-load")||("section"!=n||s.load_section_selectors(i,TvrLang.sec_clear))&&("selector"!=n||s.load_selector(i,TvrLang.load_before_clearing))||(s.log_action(o,"clear"),s.clear_fields(l.find("div.property-tag"),r,n,i),s.unlog_action(o,"clear"))}else if("tab"==n||"subgroup"==n){if("tab"==n){var c=r.closest("span.mq-tab").attr("rel");a=i.selector.find("div.property-fields-"+c).find("div.property-tag")}else a=s.get_subgroup(i);s.clear_fields(a,r,n,i)}s.section_check_values(i.section,!0,!0,!0,!0),t.endT(arguments)},clear_fields:function(r,n,i,o){t.startT(arguments),r.each(function(){var r=e(this),n=r.prev(".subgroup-tag"),i=r.find("input.property-input, textarea.property-input"),l=r.find("span.important-toggle");if(i.val(""),i.hasClass("color")&&s.clear_spectrum_inputs(s.get_meta(r,"property")),i.hasClass("tvr-editor-hidden")){var c=i.next("pre");c.hasClass("ace_editor")&&a.set_editor_content(c,a.eds[c.attr("id")],{M:o})}if(s.post_edit(i),l.hasClass("active")&&s.input_icon_toggle(l,!0),t.isDomEl(n)){var d=n.find(".chained-toggle");d.hasClass("active")&&s.input_icon_toggle(d,!0)}}),s.user_action({items:[i],val:s.title(n),M:o,pathTT:"section"!=i,icon:[{icon:s.h_i_class(i,o)},{icon:n.attr("class")}]}),s.ajax_save_settings(),t.endT(arguments)},update_tab:function(r,a,n,i,o,l,c){if(t.startT(arguments),n.find(o).removeClass("active").end().find(o+"-"+i).addClass("active").end().find(l).val(i),!c&&(r.find(a+".show").removeClass("show").end().find(a+"-"+i).addClass("show"),".pg-icon"==o)){var d=r.find(a+"-"+i);d.find(".property-fields").removeClass("show").end().find(".property-fields-"+s.get_mq_focus()).addClass("show")}".adv-tab"==o&&e.get(s.ajaxUrl+"&adv_wizard_tab="+i,function(){}),t.endT(arguments)},mq_tab_pressed:function(r){t.startT(arguments);var a,n=!0,i="",o=s.get_mq_focus(),l=r.attr("rel"),c=e("#responsive-bar").find(".query-tabs"),d=".mq-tab",u=".device-focus";if(t.hasValue(s.selInFocusID)&&(n=!1,i=".property-fields",a=s.get_pg_focus_obj()),s.update_tab(a,i,c,l,d,u,n),e.get(s.ajaxUrl+"&mq_device_focus="+l,function(){}),t.hasValue(s.selInFocusID)){var _=s.get_meta(s.get_pg_focus_obj(),"group");s.get_group(_)||s.add_property_group(_.group,l),s.tab_check_values(_.selector,l,!1,!0),s.after_tab_switch(_,a,o,a,l)}s.update_iframe_slider(s.mqs[l].min,s.mqs[l].max),s.reset_mob_previews(),t.endT(arguments)},after_tab_switch:function(e,r,n,i,o){if(t.startT(arguments),"css"!=e){var l=1==s.pref.allow_scss?"scss":"css",c=s.get_group(e);s.colorpicker_bind(c),"code"==e.groupSlug&&a.bind_editor(c,{filterClass:"custom-css-pre",mode:l,M:e}),s.update_pg_input_widths(e),t.isDomEl(r)&&t.isDomEl(i)&&r.attr("id")+n!=i.attr("id")+o&&s.clean_pg(e,r,n)}if("css"==e){var d=i.data("code-type");d=1==s.pref.allow_scss&&"css"==d?"scss":d,a.bind_editor(i,{filterClass:"custom-css-pre",mode:d,M:e}),r&&a.unbind_editor(r,e)}t.endT(arguments)},clean_pg:function(e,r,n){t.startT(arguments);var i=r&&r.hasClass("group-tag-code");i&&e&&s.check_feathers_after_prop_change(e);var o=s.maybe_remove_group(r,n);o||i&&a.unbind_editor(r.find("div.property-fields-"+n),e),t.endT(arguments)},js_in_focus:function(){return!(!s.stat.tvr.hasClass("show_code_editor")||"js"!=s.get_css_focus())},default_to_tab:function(r){t.startT(arguments),"mq"==r?s.mq_tab_pressed(s.stat.res.find(".mq-tab-"+s.get_mq_focus())):"css"==r?s.css_tab_pressed(s.stat.code.find(".css-tab-"+s.get_css_focus())):"wizard"==r&&s.adv_tab_pressed(e("#adv-tabs").find(".adv-tab-"+s.get_wizard_focus())),t.endT(arguments)},get_mq_focus:function(){t.startT(arguments);var r=e("#responsive-bar").find("input.device-focus").val();return t.hasValue(r)&&t.hasValue(s.mqs[r])||(r="all-devices"),t.endT(arguments),r},get_wizard_focus:function(r){if(t.startT(arguments),r&&!s.pref.wizard_expanded)return t.endT(arguments),!1;var a=e("#adv-tabs").find("input.adv-wizard-focus").val();return a&&"html-inspector"!=a&&"refine-targeting"!=a||(a="css-computed"),t.endT(arguments),a},get_css_focus:function(){t.startT(arguments);var e=s.stat.code.find("input.css-focus").val();return e||(e="all-browsers"),t.endT(arguments),e},get_dialog_tab_focus:function(e){t.startT(arguments);var r=e.find("input.dialog-focus").val();return r||(r="0"),t.endT(arguments),r},get_dialog_focus:function(){return s.stat.dialogs.find("div.tvr-dialog.show")},get_tab_name:function(t){return e("#responsive-bar").find(".mq-tab-"+t).find(".mq-tab-txt").text()},get_pg_focus_obj:function(){var r=e("#"+s.selInFocusID+"-"+s.pgInFocus);return!!t.isDomEl(r)&&r},get_group:function(e,r){t.startT(arguments);var a=e.group.find("div.property-fields-"+e.tabSlug);return r&&(a=a.find("input.property-input")),t.endT(arguments),!!t.isDomEl(a)&&a},get_pg_fields_obj:function(e,r){t.startT(arguments);var a=e.find("div.property-fields-"+r);return t.endT(arguments),!!t.isDomEl(a)&&a},get_subgroup:function(e,r){t.startT(arguments);var a=s.get_group(e).find("div.subgroup-"+e.subgroupSlug);return r&&(a=a.find("input.property-input")),t.endT(arguments),!!t.isDomEl(a)&&a},maybe_remove_group:function(e,r){if(t.startT(arguments),e){var a=s.get_meta(e,"group");if(!s.pg_check_values(a.group,r,!1))return t.endT(arguments),s.remove_property_group(a,r)}return t.endT(arguments),!1},update_style_signal:function(e,t,r){t?e.addClass("hasValues"):e.removeClass("hasValues")},pg_check_values:function(r,a,n){var i=arguments;t.startT(i);var o=s.get_meta(r,"group"),l=!1,c=s.get_mq_focus();return o.group.find("div.property-fields-"+a).find("input.property-input, textarea.property-input").each(function(r){if(t.isDefined(e(this).val()))return l=!0,t.endT(i),!1}),n&&a==c&&s.update_style_signal(o.selector.find("li.pg-icon-"+o.groupSlug),l),t.endT(i),l},tab_check_values:function(r,a,n,i){t.startT(arguments);var o=!1;for(var l in TvrMT.data.prog.PGs){var c=s.pg_check_values(r.find("li.group-tag-"+l),a,i);if(c&&(o=!0,!i))break}return n&&s.update_style_signal(e("#responsive-bar").find(".mq-tab-"+a),o,"tab"),t.endT(arguments),o},selector_check_disabled:function(r){t.startT(arguments);var a=r.selectorM.find("p.sel-toggles"),s=e("#responsive-bar").find(".query-tabs");for(var n in TvrMQsCombined){var i=s.find("span.mq-tab-"+n).find(".disabled-icon");t.isDomEl(a.find("input.disabled-tracker-"+n))?i.addClass("active").closest(".mq-tab").addClass("item-disabled"):i.removeClass("active").closest(".mq-tab").removeClass("item-disabled")}t.endT(arguments)},selector_check_values:function(e,r,a,n){t.startT(arguments);var i=!1,o=!1,l=s.get_meta(e,"selector");for(var c in TvrMQsCombined)if(o=s.tab_check_values(e,c,a,n),o&&(i=!0,!a&&!n))break;return r&&s.update_style_signal(l.selectorM,i,"selector",l),t.endT(arguments),i},section_check_values:function(r,a,n,i,o){var l=arguments;t.startT(l);var c=!1,d=!1,u=s.get_meta(r,"section");return r.find("li.selector-tag").each(function(){var r=s.get_meta(e(this),"selector"),a=r.selectorM.find("input.selector-tracker");if(0==a.val()){if(!r.selectorM.hasClass("hasValues"))return t.endT(l),!0;d=!0}else d=s.selector_check_values(r.selector,n,i,o);if(d&&(c=!0,!n&&!i&&!o))return t.endT(l),!1}),a&&s.update_style_signal(u.sectionM,c,"section",u),t.endT(l),c},css_tab_pressed:function(r){t.startT(arguments);var a=s.get_css_focus(),n=r.attr("rel"),i=n!=a&&s.stat.code.find("div.mt-full-code-"+a),o=s.stat.code,l=".mt-full-code",c=o.find(".css-code-tabs"),d=".css-tab",u=".css-focus";s.update_tab(o,l,c,n,d,u);var _=s.stat.code.find("div.mt-full-code-"+n);s.after_tab_switch("css",i,a,_,n),e.get(s.ajaxUrl+"&css_focus="+n),s.toolbar_adjusted(),t.endT(arguments)},adv_tab_pressed:function(r){t.startT(arguments);var a=e("#advanced-wizard"),n=".adv-area",i=a.find(".query-tabs"),o=r.attr("rel"),l=".adv-tab",c=".adv-wizard-focus";s.update_tab(a,n,i,o,l,c),s.maybe_update_wizard_panels(),t.endT(arguments)},maybe_update_wizard_panels:function(e){if(e=e?e:{},s.intelli&&t.isDomEl(r.triggerEl)){var a=s.get_wizard_focus(!0);e.exclComp||e.onlyDeferred||"css-computed"!=a||(r.get_computed_styles({},"obj",!0),s.refresh_wizard_comp_css()),e.exclActual||e.onlyQuick||"css-inspector"!=a||s.update_stylesheet_rules(),!e.onlyQuick&&a&&e.forceHTMLUpdate&&(s.update_wizard_html(e),s.update_breadcrumbs(e))}},dialog_tab_pressed:function(e){t.startT(arguments);var r=e.closest(".dialog-main"),a=".dialog-tab-field",n=r.find(".dialog-tabs"),i=e.attr("rel"),o=".dialog-tab",l=".dialog-focus";s.update_tab(r,a,n,i,o,l),t.endT(arguments)},combobox_clicked:function(e){t.startT(arguments),e.hasClass("sug-sel")?t.isDomEl(e.closest("li.in-focus"))||s.sug_css_clicked(e):(s.combo_arrow_clicked(!1,e),e.hasClass("cssfilter-combo")&&s.feature_on(e)),t.endT(arguments)},combo_arrow_clicked:function(e,r){t.startT(arguments);var r=r?r:e.prev(),a="input"==r.prop("tagName").toLowerCase()?r:r.find("input");a.data("wasOpen")?a.autocomplete().autocomplete("close"):(a.autocomplete().focus().autocomplete("search",""),s.combobox_focused(r)),a.hasClass("sug-sel")&&s.sug_css_clicked(a),t.endT(arguments)},combobox_focused:function(t){t.hasClass("custom_css_unit")&&e("#css_unit_set").val("")},combobox_item_selected:function(e,r,a,n){if(t.startT(arguments),a.val(r.item.value),a.parent(".tvr-input-wrap").addClass("manual-val").find(".comp-style").addClass("hidden").end().find(".combo-arrow").removeClass("on"),a.hasClass("property-input")){s.get_meta(a,"property");if(a.hasClass("tvr-font-select")){var i=a.closest(".field-wrap").siblings(".tvr-font-custom");s.gFontTarget=i.find(".property-input"),"Google Font..."==r.item.value?s.show_google_fonts(i):s.hide_google_fonts(a,i)}else a.hasClass("img_display")&&(t.hasValue(r.item.value)?"none"==r.item.value&&s.update_bg_image(a,r.item.value):s.clear_bg_image(a)),s.maybe_sync_fields(a);s.ajax_save_settings("",a)}if("css_unit_set"==a.attr("id")){var o=a.val();a.closest("ul").find("input.custom_css_unit").val(o)}"custom_paths"==a.attr("rel")&&(a.autocomplete("close"),s.change_preview_url(a.siblings(".change-preview-url"))),"viewed_import_stylesheets"==a.attr("rel")&&(a.autocomplete("close"),s.update_import_css_preview(!1,{c:a.siblings(".view-import-stylesheet")},"loadNew")),a.hasClass("sug-sel")&&s.sug_sel_updated(a,{con:"combo"}),a.hasClass("cssfilter-combo")&&s.pseudo_updated(a,{input:1}),"select"==n&&a.blur(),t.endT(arguments)},sug_css_clicked:function(a){t.startT(arguments);var n=a.closest("li");n.hasClass("in-focus")||(e("#code-suggestions").find("li").removeClass("hover-elsewhere in-focus"),n.addClass("in-focus"),s.sug_sel_updated(a,{con:"sug_css_clicked"})),r.reposition_overlays({con:"intelli",scroll:1}),t.endT(arguments)},fix_ff_mq_bug:function(e,t){return!t||"Firefox"!=s.browser&&"Chrome"!=s.browser?e:e-.3},get_toggle_data:function(r,a){t.startT(arguments),r?r=r.closest(".uit-par"):"show_interface"==a?r=e("#m-logo"):"hover_inspect"==a?r=e("#hover-inspect-toggle"):"mt_highlight"==a?r=e("#toggle-highlighting"):"show_code_editor"==a&&(r=e("#toggle-full-code-editor"));var n=!1,i=!1,o=!1;a=a?a:r.data("aspect"),"show_code_editor"==a||"show_code_editor"==r.data("aspect")?(i=r,r=e("#toggle-full-code-editor"),n=e("#code-editor-alias")):"show_extra_actions"==a?(i=r,r=e("#show_extra_actions")):"hover_inspect"==a?(i=r,r=e("#hover-inspect-toggle")):"selname_code_synced"==a?(i=r,r=e("#selname_code_synced")):"code_manual_resize"==a?(i=r,r=e("#code_manual_resize")):"pseudo_classes"!=a&&"pseudo_elements"!=a&&"page_specific"!=a&&"favourite_filter"!=a||(o=e("#css-filters"),i=r,n=s.get_css_filter_alias(r,a));var l=r.hasClass("on")?0:1;return t.endT(arguments),{clicked:r,aspect:a,turnOn:l,alreadyOn:!l,$alias:n,$aliasTrigEl:i,$filter_scope:o}},feature_on:function(e,r,a){t.startT(arguments),a=a?a:{};var n=s.get_toggle_data(e,r);a.offFirst&&(s.feature_off(e,r,a.offFirst),n=s.get_toggle_data(e,r)),n.alreadyOn||s.toggle_feature(e,r,a),t.endT(arguments)},feature_off:function(e,r,a){t.startT(arguments),a=a?a:{};var n=s.get_toggle_data(e,r);n.alreadyOn&&s.toggle_feature(e,r,a),a.onAgain&&s.feature_on(e,r,a.onAgain),t.endT(arguments)},toggle_feature:function(n,i,o){t.startT(arguments);var l=s.get_toggle_data(n,i);n=l.clicked,i=l.aspect,o=o?o:{};var c=l.turnOn,d=!!l.$filter_scope&&l.$filter_scope,u="",_=n.data("pref_sub_key");o.pref_sub_key=!!_&&_,o.tmp&&(s.tmp[i]=c?"turnedOn":"turnedOff"),o.fHTML=t.isDefined(o.fHTML)?o.fHTML:n.data("fhtml"),o.noSave=t.isDefined(o.noSave)?o.noSave:parseInt(n.data("no-save"));var p=o.fHTML&&s.stat.fHTML?s.stat.tvr.add(s.stat.fHTML):s.stat.tvr,f=(o.extraClass?i+" "+o.extraClass:i,l.$alias?n.add(l.$alias):n),g=!1;if("wizard_expanded"==i&&s.after_animation(s.stat.wiz,{type:"transition",aspect:i,turnOn:c}),c)if(p.addClass(i),f.addClass("on"),"show_time_concurrently"==i&&(o.noSave=1,t.log_concurrent=1),d&&"favourite_filter"!=i||(g=n.data("neg")),"show_rulers"==i)e("#common-devices-preview").removeClass("hidden"),s.toolbar_adjusted();else if("selname_code_synced"==i)s.selname_code_synced(l.$aliasTrigEl,c);else if("code_manual_resize"==i){var m=s.stat.code.add(s.stat.opts);m.find("div.css-code-wrap").css("height",""),s.toolbar_adjusted()}else"show_code_editor"==i?(s.default_to_tab("css"),s.toolbar_adjusted()):"hover_inspect"==i?s.iframe_functions_loaded()&&r.bind_wizard_hover():"fullscreen"==i?t.enable_full_screen():"wizard_expanded"==i||("show_interface"==i?(s.toolbar_adjusted(),"turnedOff"==s.tmp.hover_inspect&&(s.tmp.hover_inspect=!1,s.feature_on(!1,"hover_inspect",{noSave:1}))):"mt_highlight"==i?(o.con&&r&&r.reposition_overlays(o),s.highlightEnabled=!0):d&&n.hasClass("filter-editable")?n.find("input.combobox").select():"favourite_filter"==i&&s.filter_favourited(n,o,i));else if("show_time_concurrently"==i&&(o.noSave=1,t.log_concurrent=0),f.removeClass("on"),d?d.find("ul.flist-"+i).find("li.css-filter-item.on").length||p.removeClass(i):p.removeClass(i),d&&"favourite_filter"!=i||(g=n.data("pos")),"show_rulers"==i)e("#common-devices-preview").addClass("hidden"),s.toolbar_adjusted();else if("selname_code_synced"==i)s.selname_code_synced(l.$aliasTrigEl,c);else if("code_manual_resize"==i){var v=l.$aliasTrigEl.data("editor-type"),h="full-code"==v?l.$aliasTrigEl.closest(".mt-full-code").find("pre"):l.$aliasTrigEl.closest(".group-tag-code").find("pre"),T=h.attr("id"),b=a.eds[T];if(b){var y=b.session.getLength();a.editor_update_height(b,h,16*y)}s.toolbar_adjusted()}else"hover_inspect"==i?s.iframe_functions_loaded()&&r.unbind_wizard_hover():"show_code_editor"==i?s.toolbar_adjusted():"fullscreen"==i?t.disable_full_screen():"wizard_expanded"==i||("show_interface"==i?(s.toolbar_adjusted(),s.feature_off(!1,"hover_inspect",{tmp:1,noSave:1})):"mt_highlight"==i?s.highlightEnabled=!1:"favourite_filter"==i&&s.filter_un_favourited(n,o,i));if(o.pref_sub_key?(s.pref[i][o.pref_sub_key]=c,u+="&pref_sub_key="+o.pref_sub_key):s.pref[i]=c,g&&s.refresh_tt(f,g,l.$aliasTrigEl),n.data("text-pos")){var w=c?n.data("text-neg"):n.data("text-pos");n.text(w)}d&&s.pseudo_updated(n,{toggle:1,turnOn:c}),o.noSave||e.MTajaxQueue({url:s.ajaxUrl,type:"GET",data:i+"="+c+u,async:!0,complete:function(e){"draft_mode"==i&&(s.cssStub=c?"draft":"active",s.user_action({items:[c?TvrLang.draft_enabled:TvrLang.draft_disabled],icon:"draft-mode lg-icon"}),s.ajax_save_settings())},success:function(e){},error:function(e,t,r){}}),t.endT(arguments)},after_animation:function(e,t){var r="transition"==t.type?"transitionend.tvr webkitTransitionEnd.tvr oTransitionEnd.tvr otransitionend.tvr MSTransitionEnd.tvr":"oanimationend.tvr animationend.tvr webkitAnimationEnd.tvr";e.on(r,function(){if("wizard_expanded"==t.aspect&&(s.toolbar_adjusted(),t.turnOn)){s.default_to_tab("wizard");var n=a.eds.wizard_inspector_html;n.resize(),s.maybe_update_wizard_panels({forceHTMLUpdate:1})}e.off(r)})},selname_code_synced:function(t,r){var a="selname_code_synced"==t.attr("id")?"wizard":"existing-sel",n=!!r,i="wizard"==a?e("#code-suggestions").find("li.in-focus").find(".sug-sel").val():t.closest(".float-form").find(".selector-css-textarea").val();i&&("wizard"==a?s.get_nice_name(i,!0,n):t.closest(".float-form").find("input.selector-name-input").val(s.get_nice_name(i,!1,n)))},filter_favourited:function(t,r,a){var s=t.closest("li").clone(!0,!1);s.removeAttr("title"),e("#fav-filters").append(s).hide().fadeIn("fast")},filter_un_favourited:function(t,r,a){var n=s.pseudo_class_format(t.closest("li").data("pref_sub_key"));e("#fav-filters").find("li."+n).fadeOut("fast",function(){e(this).remove()})},determine_slider_val:function(e,t){var r=0;return r=e&&!t?e:t?t:s.frameWidth},update_iframe_slider:function(r,a){t.startT(arguments);var n=s.determine_slider_val(r,a),i=0,o=s.fullWidth;s.slider_moved(n,a,s.get_mq_focus()),s.update_ruler_highlighter(r,a),r?e("#iframe-min-width").text("min: "+r+"px"):e("#iframe-min-width").text(""),a?e("#iframe-max-width").text("max: "+a+"px"):e("#iframe-max-width").text("");var l=s.stat.slider;l.slider({min:i,max:o,value:n,start:function(e,r){t.startT(arguments),s.highlightEnabled&&s.feature_off(0,"mt_highlight",{fHTML:1,noSave:1,tmp:1})},slide:function(e,r){t.startT(arguments),s.slider_moved(r.value,a,s.get_mq_focus()),s.reset_mob_previews()},change:function(e,t){"turnedOff"==s.tmp.mt_highlight&&(s.tmp.mt_highlight=!1,s.feature_on(0,"mt_highlight",{fHTML:1,noSave:1})),s.screen_width_adjusted(s.intelli?"intelli":"reg")}}),s.iframe_slider_set=!0,t.endT(arguments)},slider_moved:function(r,a,n){t.startT(arguments),s.animate_screen?e("#v-frontend").width(s.animate_screen).stop(!0).animate({width:s.fix_ff_mq_bug(r,a)},"slow",function(){s.animate_screen=!1}):e("#v-frontend").width(s.fix_ff_mq_bug(r,a)),e("#iframe-pixel-width").text(r+"px"),s.check_slider_within_range(r,n),t.endT(arguments)},toggle_screen_preview:function(e){t.startT(arguments),e=e.closest("li.mt-screen-preview"),e.hasClass("clicked")?s.unset_screen_preview(e,"clicked"):s.set_screen_preview(e,"clicked"),t.endT(arguments)},set_screen_preview:function(r,a){t.startT(arguments);var n=e("#common-devices-preview").find("li.clicked");if("hover"==a&&t.isDomEl(n))return!1;n.removeClass(a),s.animate_screen=e("#v-frontend").width();var i=parseInt(r.attr("rel")),o=TvrMT.data.prog.mobPreview;s.stat.slider.slider("value",o[i][1]),s.slider_moved(o[i][1],!0,s.get_mq_focus()),e("#height-screen").removeClass("hidden").css("top",o[i][2]+19+"px"),r.addClass(a),t.endT(arguments)},unset_screen_preview:function(r,a,n){if(t.startT(arguments),"hover"==a&&t.isDomEl(e("#common-devices-preview").find("li.clicked"))||"clicked"==a)return"clicked"==a&&r.removeClass(a),!1;s.animate_screen=e("#v-frontend").width();var i=s.get_mq_focus(),o=s.determine_slider_val(s.mqs[i].min,s.mqs[i].max);s.stat.slider.slider("value",o),s.slider_moved(o,s.mqs[i].max,i),e("#height-screen").addClass("hidden"),r.removeClass(a),t.endT(arguments)},reset_mob_previews:function(){t.startT(arguments),e("#common-devices-preview").find("li").removeClass("clicked"),e("#height-screen").addClass("hidden"),t.endT(arguments)},update_ruler_highlighter:function(r,a){t.startT(arguments);var n=e("#rHighlight-wrap"),i=e("#rHighlight");if(r||a){n.add(i).removeClass("hidden");var o=e("#min-neg"),l=e("#max-neg");r?o.css({width:r}).removeClass("hidden"):o.addClass("hidden"),a?l.css({left:a,width:s.fullWidth-a}).removeClass("hidden"):l.addClass("hidden"),r=r?r:0,a=a?a:s.fullWidth;var c=r?r+19:19,d=a?a-r:s.fullWidth-19-r;i.css({left:c,width:d})}else n.add(i).addClass("hidden");t.endT(arguments)},check_slider_within_range:function(r,a){t.startT(arguments);var n=!1,i=!!s.mqs[a].min&&s.mqs[a].min,o=!!s.mqs[a].max&&s.mqs[a].max;i&&r<i&&(n=!0),o&&r>o&&(n=!0);var l=e("#current-screen-width"),c=e("#v-frontend-wrap").find("div.corner").add(l),d="Styles added to the current tab will not have an effect at this screen width ("+r+"px)";n?(c.addClass("warn"),l.attr("title",d)):(c.removeClass("warn"),l.attr("title","Screen width: "+r+"px")),t.endT(arguments)},screen_width_adjusted:function(e){t.startT(arguments),s.iframe_functions_loaded()&&(r.reposition_overlays({con:e,scroll:0}),r.get_computed_styles(s.curSelCSS,"str"),s.refresh_comp_css(),s.maybe_update_wizard_panels()),t.endT(arguments,1)},map_formatted_comp:function(e,r,a,n,i,o,l,c,d){if(t.startT(arguments),d)var u=s.intelliCompProps;else var u=s.compProps;if("straight"==a&&("var"==r?u[e[n]]=o:(0==i&&(u[e[n]]=[]),u[e[n]][i]=[],u[e[n]][i].val=o,u[e[n]][i].htmlString=l)),"array"==a){var _=-1,p=e[n];for(var f in p)"var"==r?u[p[f]]=c[++_]:(0==i&&(u[p[f]]=[]),u[p[f]][i]=[],u[p[f]][i].val=c[++_],u[p[f]][i].htmlString=l)}d?s.intelliCompProps=u:s.compProps=u,t.endT(arguments)},format_exceptions:function(e,r,a,n,i,o){if(t.startT(arguments),"var"==i)var l=a;else var l=a[n].val,c=a[n].htmlString;if(!t.hasValue(l))return!1;if("font-family"==r||"list-style-type"==r||"border-top-left-radius"==r||"border-top-right-radius"==r||"border-bottom-right-radius"==r||"border-bottom-left-radius"==r)s.map_formatted_comp(e,i,"straight",r,n,l,c,[],o);else if("text-shadow"==r||"box-shadow"==r){var d=l.match(/(-?\d+px)|(rgba?\(.+\))/g);if(d){if("MSIE"!=s.browser){var u=d[1],_=d[2],p=t.replace_decimals(d[0],1),f=d[3];if("text-shadow"==r)d=[u,_,f,p];else if("box-shadow"==r){var g=d[4],m=d[5];d=[u,_,f,g,p,m]}}}else d=[0,0,0,"none"],"box-shadow"==r&&(d[3]=0,d[4]="none",d[5]="");s.map_formatted_comp(e,i,"array",r,n,l,c,d,o)}else if("list-style-image"==r)s.map_formatted_comp(e,i,"straight",r,n,t.basename(l),c,[],o);else if("background-img-full"==r){var v=[];v[0]=t.extract_str("bg-image",l);var h=t.extract_str("gradient",l);if(h){var T=/gradient\((.+)\)/.exec(h);if(T){var b=T[1],y=/rgba?\([^)]+\)/g,w=t.get_all_matches(b,y,0),x=t.replace_all_matches(b,w,"xxx"),k=x.split(", "),C="";l.indexOf("webkit")>=0&&(C="webkit-");var S="top to bottom",M=!1,j=0,L=0;if(k[0].indexOf("deg")>-1&&(S=e.keys[C+"gradient-angle"][k[0]],M=!0,L=1),v[1]=S,v[2]=w[j],M&&k.length>3||!M&&k.length>2){var q=k[++L].split(" ");v[3]=w[++j],v[4]=q[1],v[5]=w[++j]}else v[3]="none",v[4]="0",v[5]=w[++j]}else h.indexOf("svg")>-1&&(v[1]="IE9 can't report",v[2]="IE9 can't report",v[3]="IE9 can't report",v[4]="IE9 can't report",v[5]="IE9 can't report")}else v[1]="none",v[2]="none",v[3]="none",v[4]="0",v[5]="none";s.map_formatted_comp(e,i,"array",r,n,l,c,v,o)}else if("background-position"==r){var D=l.split(", "),I=D[0].split(" "),E=e.keys["background-position-x"][I[0]],z=e.keys["background-position-y"][I[1]],O=E?E:I[0],F=z?z:I[1],A=O+" "+F;s.map_formatted_comp(e,i,"straight",r,n,A,c,[],o)}else if("background-repeat"==r||"background-attachment"==r||"background-size"==r||"background-clip"==r){var D=l.split(", ");s.map_formatted_comp(e,i,"straight",r,n,D[0],c,[],o)}t.endT(arguments)},filter_css_exceptions:function(e){if(t.startT(arguments),e)var r=s.intelliCompProps;else var r=s.compProps;var a=TvrMT.data.prog.propExc,n=0;for(var i in r){++n;var o=r[i];if(o===Object(o))for(var l in o)s.format_exceptions(a,i,o,l,"obj",e);else s.format_exceptions(a,i,o,"","var",e)}return t.endT(arguments),n},refresh_comp_css:function(){if(t.startT(arguments),!s.iframe_functions_loaded())return t.endT(arguments),!1;var r=s.filter_css_exceptions(!1),a=e("#"+s.selInFocusID);if(!t.isDomEl(a))return t.endT(arguments),!1;if(r<1){var n=TvrLang.null_selector;return a.find(".option-value").text(n),a.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text(""),void t.endT(arguments)}var i="div.field-wrap:not(.tvr-editor-area)";if(""!=s.pgInFocus)var o=a.find("li.group-tag-"+s.pgInFocus).find(i);else var o=a.find(i);o.each(function(r){var a=e(this);if(!a.hasClass("group-label")&&!a.hasClass("sub-label")){var n=a.find(".option-label"),i=a.find(".option-value"),o=n.text(),l=a.find("span.comp-style"),c=a.find(".property-input"),d=l.attr("class").split(" "),u=d[1].replace("cprop-",""),_=s.compProps[u],p=0;if(t.isDefined(_))if(_===Object(_)){a.addClass("mixed-cp"),l.text("[mix]");var f=TvrLang.value_varies,g="";for(var m in _)if(t.isDefined(_[m].val)){var v=_[m].htmlString.replace("&#60;","<").replace("&#62;",">");g+='<tr class="mixed-val" rel="'+p+'"><td>'+ ++p+"</td><td title='"+v+"'>"+s.colored_box(_[m].val,!0)+"</td></tr>"}a.find("table.comp-mixed-table").find("tbody").html(g)}else{var f=_;a.removeClass("mixed-cp");var h=_;if(_=s.truncate_displayed_comp_css(c,_),a.hasClass("is-picker")){var T="background-color:transparent";"transparent"!=h&&"none"!=h&&(T="background-color:"+h,f=t.maybe_to_hex(h)),l.html('<span style="'+T+'"></span>')}else l.html(_)}else{var f=TvrLang.style_not_applicable;"Content"==o&&(f=TvrLang.not_knowable),l.text("")}i.text(f)}}),t.endT(arguments)},truncate_displayed_comp_css:function(e,r){t.startT(arguments);var a=e.width(),s=r.length,n=a/6;return s>n&&(r=r.substring(0,n)+"..."),t.endT(arguments),r},colored_box:function(e){if(t.startT(arguments),!e||e.indexOf("rgb")<0||e.indexOf(":")>-1)return t.endT(arguments),e;var r=t.maybe_to_hex(e),a='<span class="colored-box" style="background-color:'+e+'"></span>';return a+='<span class="colored-val">'+r+"</span>",t.endT(arguments),a},ei:-1,logArr:[],log:function(r){if(t.startT(arguments),e.isPlainObject(r[0]))for(var a in r)r[a]["long"]=r[a]["long"]?r[a]["long"]:"<p></p>",r[a].type=r[a].type?r[a].type:"error",s.logArr[++s.ei]=r[a];else r["long"]=r["long"]?r["long"]:"<p></p>",r.type=r.type?r.type:"error",s.logArr[++s.ei]=r;t.endT(arguments)},extract_status:function(r){t.startT(arguments);var a=-1,s=[];return r.find("li.tvr-message").each(function(){var t=e(this),r=t.attr("class"),n="notice",i=t.find(".short").text(),o=t.find(".long").html();
r.indexOf("tvr-info")>-1?n="info":r.indexOf("tvr-warning")>-1?n="warning":r.indexOf("tvr-error")>-1&&(n="error"),s[++a]={"short":i,"long":o,type:n}}),t.endT(arguments),s},is_boring_status:function(r){t.startT(arguments);var a=!1;if(e.isArray(r))for(var s in r)r[s]["short"]==TvrLang.settings_saved&&1==r.length&&(a=!0);return t.endT(arguments),a},update_tmp_prog:function(r,a){t.startT(arguments);var s=e("#m-logo"),n=e("#status-short"),i=e("#dialogs").find(".tvr-dialog"),o=i.find(".dialog-status").find("span"),l=i.find(".dialog-icon"),c=s.add(n).add(o).add(l),d=n.add(o);a?(c.removeClass("active"),d.text("")):(d.removeClass(),c.addClass("active"),d.text(r)),t.endT(arguments)},update_prog_indicator:function(e,r,a,n){if(t.startT(arguments),"plus"==e){if(!s.something_wrong){s.update_tmp_prog(r+"...");var i=t.in_array(r,s.progStatus);i!==!1&&(s.progStatus.splice(i,1),clearTimeout(s.timer.prog[r])),s.progStatus.push(r);var o=s.tOut;s.timer.prog[r]=setTimeout(s.prog_error,o,r,o)}}else r&&s.log(r),clearTimeout(s.timer.prog[a]),s.unset_prog(a),s.progStatus.length<=0&&(n||s.something_wrong||(s.update_tmp_prog("",!0),s.update_full_logs()));t.endT(arguments)},unset_prog:function(e){var r=t.in_array(e,s.progStatus);r!==!1&&s.progStatus.splice(r,1)},ua_detected:function(){s.something_wrong=!1},JSerrors:[],prevJSerrors:[],catch_js_errors:function(){t.startT(arguments),window.onerror=function(e,t,r){s.JSerrors.push({error:e,URL:t,line:r,source:TvrLang["interface"]}),s.instant_show_js_error("ui")},t.endT(arguments)},instant_show_js_error:function(e){var t=s.JSerrors[0].error;t+=" (line "+s.JSerrors[0].line+")",s.log({"short":t,"long":"<p>"+TvrLang.js_error_site+":</p>"+s.js_error_deets(),type:"warning"})},js_error_deets:function(r){t.startT(arguments);var a="",n=r?s.prevJSerrors:s.JSerrors;if(n.length>0){a+="<ol>";for(var i in n){var o=n[i];a+="<li>";for(var l in o){var c=o[l];if("URL"==l)c='<a target="_blank" href="'+c+'">'+t.root_rel(c)+"</a>",c+=" (line "+o.line+")";else if("line"==l)continue;a+="<b>"+t.ucwords(l)+":</b> "+c+"<br />"}a+="</li>"}a+="</ol>",s.prevJSerrors=e.extend(!0,[],s.JSerrors),s.JSerrors=[]}return t.endT(arguments),a},prog_error:function(e,r,a){if(t.startT(arguments),s.something_wrong)return s.unset_prog(e),!1;s.something_wrong=!0,s.update_tmp_prog("",!0);var n=s.js_error_deets(!0),i=n?TvrLang.something_wrong_discovered:TvrLang.something_wrong_no_errors,o=tvrsprintf(TvrLang.something_wrong_intro,e,r/1e3);s.log({"short":TvrLang.something_wrong,"long":"<p>"+o+" "+i+"</p>"+n+'<div class="heading">'+TvrLang.something_wrong_tips_heading+'</div><ol><li><a target="_blank" href="https://codex.wordpress.org/Using_Your_Browser_to_Diagnose_JavaScript_Errors">'+TvrLang.something_wrong_console_article+"</a> ("+TvrLang.something_wrong_reliable+")</li><li>"+TvrLang.something_wrong_disable+"</li><li>"+TvrLang.something_wrong_clueless+"</li><li>"+TvrLang.something_wrong_configure+"</li><li>"+TvrLang.something_wrong_other+"</li></ol><p>"+TvrLang.something_wrong_priority+"</p>",type:"warning"}),s.update_full_logs(),s.unset_prog(e),t.endT(arguments)},log_js_error:function(){},update_short_status:function(){t.startT(arguments);var r=e("#dialogs").find(".tvr-dialog"),a=r.find(".dialog-status").find("span"),n=e("#status-short");n.add(a).removeClass();var i=["error","warning","info","notice"];for(var o in i){var l=e("#full-logs").find("ul.logs").find("li.tvr-"+i[o]).last();if(t.isDomEl(l)){var c=i[o];break}}if(t.isDomEl(l)){var d=l.find(".short").text(),u="",_="";d==TvrLang.settings_saved?(_='<span rel="display-revisions" class="short-status-icon display-revisions show-dialog" title="View history"></span>',e("#status-board").addClass("dont-show-full-logs")):(u="...",e("#status-board").removeClass("dont-show-full-logs"));var p='<span class="short-status-text">'+d+u+"</span>"+_;n.add(a).addClass("tvr-"+c).html(p),n.addClass("tvr-message"),a.find(".short-status-text").addClass("link close-dialog");var f=l.find(".long").text();a.attr("title",f),s.stat.tvr.addClass("notice_showing")}else s.stat.tvr.removeClass("notice_showing");t.endT(arguments)},update_full_logs:function(r){t.startT(arguments),r&&s.log(r);var a=e("#full-logs").find(".logs"),n=[];for(var i in s.logArr)if("dev-notice"!=s.logArr[i].type){var o=e("#log-item-template").clone().removeAttr("id");o.attr("class",o.attr("class").replace("tvr-error","tvr-"+s.logArr[i].type)).find(".short").text(s.logArr[i]["short"]).end().find(".long").html(s.logArr[i]["long"]),n[i]=o}var l=e("#data-msg-pending");(!parseInt(l.attr("rel"))||t.hasValue(s.logArr[i])&&s.logArr[i]["short"]==TvrLang.something_wrong)&&a.html(n),l.attr("rel",0),s.logReset(),s.update_short_status(),t.endT(arguments)},logReset:function(){s.logArr=[],t.ei=-1},clear_messages:function(){t.startT(arguments),e("#status-short").add(e("#dialogs").find(".tvr-dialog").find(".dialog-status").find("span")).removeClass().html(""),e("#full-logs").find(".logs").html(""),t.endT(arguments)},default_to_sel:function(){t.startT(arguments);var r=e("#last-viewed-selector").val(),a=e("#last-edited-selector").val();if(t.hasValue(r)&&t.isDomEl(e("#"+r)))var n=e("#"+r);else if(t.hasValue(a)&&t.isDomEl(e("#"+a)))var n=e("#"+a);else var n=e("#tvr-menu").find("li.selector-tag:eq(0)");return n&&t.hasValue(n.attr("id"))?(s.startSel=!0,s.tvr_iterate_selectors_v(n),t.endT(arguments),void 0):(t.endT(arguments),!1)},adjust_comp_span:function(e,r){t.startT(arguments),"after"==r?e.val()?(e.closest(".property-tag").addClass("manual-val"),e.siblings("span.comp-style").addClass("hidden")):(e.closest(".property-tag").removeClass("manual-val"),e.siblings("span.comp-style").removeClass("hidden")):"hover"==r&&e.siblings("span.comp-style").addClass("hidden"),t.endT(arguments)},chain_is_on:function(e){return!!t.isDomEl(e.subgroup.find("input.chained-tracker"))},sync_fields:function(r,a){t.startT(arguments);var n=s.get_subgroup(a,"inputs"),i=r.val();n.not(r).each(function(t){var r=e(this);r.hasClass("color")?i?s.update_spectrum(i,r,{},!1):s.clear_spectrum_inputs(s.get_meta(r,"property")):r.val(i),s.post_edit(r)}),r.focus(),t.endT(arguments)},maybe_sync_fields:function(e){if(t.startT(arguments),e.hasClass("autofillable")){var r=s.get_meta(e,"property");s.chain_is_on(r)&&s.sync_fields(e,r)}t.endT(arguments)},sync_important:function(r,a){if(t.startT(arguments),s.chain_is_on(r)){var n=s.get_subgroup(r).not(r.property);n.each(function(t){var r=e(this).find("span.important-toggle");("add"==a&&!r.hasClass("active")||"remove"==a&&r.hasClass("active"))&&s.input_icon_toggle(r,!0)})}t.endT(arguments)},bind_keydown_events:function(e){e.on("keydown.tvr",function(t){if(e.hasClass("selector-name-input")&&s.pref.selname_code_synced)return!1}).on("blur",function(){e.off("keydown.tvr")})},bind_input_events:function(e){t.startT(arguments),e.on("input.tvr propertychange.tvr",function(t){var r=e.attr("class"),a=!1;if(!r)return!1;if(r.indexOf("property-input")>=0)s.inputWaitingObj=e,s.maybe_sync_fields(e),s.post_edit(e);else if(r.indexOf("selector-css-textarea")>=0)a=!0,s.pref.selname_code_synced&&e.closest(".float-form").find(".selector-name-input").val(e.val());else if(r.indexOf("sp-input")>=0){var n=s.inputWaitingObj=e.closest("span.tvr-input-wrap").find("input.color");if(r.indexOf("sp-input-opacity")<0)s.update_spectrum(e.val(),n,e,!0);else{var i=e.val();if(isNaN(i)||i<0||i>1)return;var o=n.spectrum("get").toRgb();o.a=i,n.spectrum("set",o),s.update_spectrum_inputs(tinycolor(o),n,e,!0)}}r.indexOf("img_display")<0&&!a&&s.set_typing_timer()}),e.on("blur",function(){s.unbind_input_events(e)}),t.endT(arguments)},unbind_input_events:function(e){t.startT(arguments),e.off("input.tvr propertychange.tvr"),t.endT(arguments)},update_input_width:function(r,a){t.startT(arguments),a=a?a:14;var s=e("<span>").text(r.val()).appendTo(r.parent()),n=s.innerWidth();s.remove(),r.width(n+a),t.endT(arguments)},update_pg_input_widths:function(r){if(t.startT(arguments),t.isDomEl(r.group)){var a=s.get_group(r,"inputs");a&&s.get_group(r,"inputs").each(function(t){e(this).val()&&s.update_input_width(e(this))})}t.endT(arguments)},done_typing:function(){s.ajax_save_settings("",s.inputWaitingObj)},get_folders:function(){t.startT(arguments);var r=[];return e("#tvr-menu").find(".section-tag").each(function(t){var a=s.get_meta(e(this),"section");r[t]=a.sectionH}),t.endT(arguments),r},show_wizard:function(r){t.startT(arguments),s.intelli=!0,s.stat.tvr.addClass("show-wizard");var a=e("#v-left-controls").width()+5;e("#right-stuff-wrap").css("right",a+"px");var n=!1;s.toolbar_adjusted(n,!0,r),s.screen_width_adjusted("intelli"),TvrMT.data.prog.combo.cur_folders=s.get_folders();var i="";if(s.wiz_update_sel_mode){var o=s.wiz_update_sel_mode;i=o.sectionH}else if(t.hasValue(s.selInFocusID)){var l=s.get_meta(e("#"+s.selInFocusID),"selector");i=l.sectionH}else{var c=t.obj_index(0,s.uiData,"non_section");i=c?c["this"].label:""}e("#wizard_folder").val(i).removeClass("text-label"),t.endT(arguments,1)},hide_wizard:function(){t.startT(arguments),s.stat.tvr.removeClass("show-wizard"),e("#right-stuff-wrap").css("right",""),s.screen_width_adjusted("intelli"),s.intelli=!1,e("#wizard-name").val(""),s.redo_sug_sels("",!0),s.toolbar_adjusted(void 0,!1),s.stat.tvr.removeClass("wiz_update_sel"),s.wiz_update_sel_mode=!1,t.endT(arguments)},wiz_update_sel:function(r){t.startT(arguments);var a=s.get_meta(r,"selector");s.load_selector(a,TvrLang.load_before_retargeting)||(s.close_all_expanded(!1,!1,!0),s.stat.tvr.addClass("wiz_update_sel"),s.wiz_update_sel_mode=a,s.feature_on(e("#hover-inspect-toggle"),"hover_inspect"),s.tvr_iterate_selectors_v(a.selector)),t.endT(arguments)},human_tagname:function(e){t.startT(arguments);var r={h1:"heading 1",h2:"heading 2",h3:"heading 3",h4:"heading 4",h5:"heading 5",h6:"heading 6",p:"paragraph",br:"line break",hr:"horizontal rule",abbr:"abbreviation",b:"bold",em:"emphasis",i:"emphasis",ins:"insert",pre:"preformatted",q:"quote",sub:"subscript",sup:"superscript",optgroup:"option group",img:"image",figcaption:"figure caption",a:"link",ul:"unordered list",ol:"ordered list",li:"list item",th:"table heading",tr:"table row",td:"table data",thead:"table head",tbody:"table body",tfoot:"table foot",col:"column",colgroup:"column group"};return t.endT(arguments),r[e]?r[e]:e},human_pseudo:function(e){var r=t.pseudo_str_to_arr(e),a="";for(var s in r)a+=r[s].replace(/^:nth\-(?:child|of\-type)\((.*)\)$/,":($1)").replace(/^:nth\-last\-(?:child|of\-type)\((.*)\)$/,":L($1)").replace("link","unvisited");return a},humanize:function(e,r,a){t.startT(arguments),a=a?a:{},a.keepPre=a.keepPre?e:"";var s=new RegExp("("+e+")([a-zA-Z0-9"+e+"\\(\\)\\[\\]=\\^\\*'\"\\/\\$~-]+)","g"),n=new RegExp(e,"g");return r=r.match(s),t.endT(arguments),r=r&&r[0]?r[0].replace(n,a.keepPre):"",a.keepDashes||(r=r.replace(/[-_]+/g," ")),r},ensure_unqique_name:function(e,r,a,n){t.startT(arguments);var i=1,o="create-new"==a?s.get_all_selector_code():{};do{var l=!1,c=i>1?" _"+i:"",d=e+c,u=t.convert_to_param(d);if("folderName"==a)l=s.uiData[u];else if("folderWithSpace"==a)l=s.uiData[u]&&t.obj_length(s.uiData[u])>=25;else if("import"==a)l=n.unqSels[u]&&n.unqSels[u].code!=r;else if("create-new"==a)for(var _ in o)if(o.hasOwnProperty(_)&&t.convert_to_param(o[_].sName)==u){l=!0;break}i++}while(l);return t.endT(arguments),d},human_css_name:function(e){t.startT(arguments);var a=[],n=e.split(","),i=r.sel_trail(n[0]).pieces.reverse();for(var o in i)a[o]={level:0==o?"child":"parent",tagName:i[o].split(/[#:\.]/)[0],id:s.humanize("#",i[o]),"class":s.humanize("\\.",i[o]),pseudo:s.human_pseudo(i[o])};var l=[];for(var o in a){var c="",d="",u=a[o];c=s.human_tagname(u.tagName),u.pseudo&&(d=""+u.pseudo),u.id?l[o]=u.id:u["class"]?l[o]=u["class"]:l[o]=c,l[o]+=d}var _="";if(n[1]){var p=n.length-1,_=1==p?"& "+s.human_css_name(n[1].trim()):"+"+p+" "+TvrLang.more;l.unshift(_)}t.endT(arguments);var f=l[0];f+=_?" "+_:"";var g=_?3:2,m=[];for(var v in l){if(v>=g)break;m.push(l[v])}var h=m.reverse().join(" ");return s.ensure_unqique_name(h,e,"create-new")},get_nice_name:function(r,a,n){if(r=r?r:s.intelli_css,n)i=r;else var i=t.capitalizeFL(s.human_css_name(r));var o=e("#wizard-name");return!a||o.is(":focus")?i:void o.val(i)},clear_wizard:function(){if(t.startT(arguments),s.feature_off(0,"mt_highlight",{fHTML:1,noSave:1}),r.triggerEl={},e("#html-computed-css").find("span.comp-prop-value").html(""),e("#wizard-name").val(""),s.redo_sug_sels(""),e("#targets-nothing").removeClass("show"),e("#nav-bread").find(".refine-target-controls").find("span").addClass("disabled"),s.stat.breadcrumbs.html(""),s.pref.wizard_expanded){if(a.eds.wizard_inspector_html){var n=a.eds.wizard_inspector_html;n.gotoLine(1,0),n.scrollToLine(1,!0,!0,function(){})}e("#actual-styles").html("")}t.endT(arguments)},pseudo_updated:function(a,n){var i=a.closest("li");if(n.input){var o=s.get_css_filter_alias(a);t.isDomEl(o)&&(o=o.find("input.combobox"),o.val(a.val()),s.update_input_width(o,4)),s.update_input_width(a,4)}var l=e("#code-suggestions");l.find("li").each(function(){var t=e(this);n.manual=1,n.$li=i;var a=t.find(".sug-sel"),s=t.data("level"),o=r.apply_css_filters(a.val(),r.dom.nodes[s],r.dom,n);a.val(o.code),a.get(0).scrollLeft=a.get(0).scrollWidth;var l=a.attr("rel");if(l)for(var c in r.dom.sels.combo[l]){var d=r.dom.sels.combo[l][c];o=r.apply_css_filters(d,r.dom.nodes[s],r.dom,n),r.dom.sels.combo[l][c]=o.code}});var c=l.find("li.in-focus");t.isDomEl(c)?s.sug_sel_updated(c.find("input"),{con:"manual"}):t.isDomEl(r.triggerEl)&&r.all_targeting_actions(r.triggerEl,{})},sug_sel_updated:function(a,n){var i=a.closest("li");if(n.editingNameField)if(t.isDomEl(a))a.val(n.val);else{var o='<li class="code-suggestion in-focus manual-edit" data-level="0"><span class="tvr-input-wrap"><input type="text" class="sug-sel combobox" value="'+t.regular_escape_quotes(n.val)+'" /></span><span class="num-els-icon-wrap">'+s.num_els_icon("")+"</span></li>";s.redo_sug_sels(o),i=e("#code-suggestions").find("li")}"manual"==n.con&&(e("#code-suggestions").addClass("has-manual-edit").find("li.manual-edit").removeClass("manual-edit"),i.addClass("manual-edit"));var l=n.val?n.val:a.val(),c=r.jquery_compat_sel_elements(l),d=c.length;i.find(".num-els-icon-wrap").add(e("#selector-naming").find(".num-els-icon-wrap")).html(s.num_els_icon(d));var u=!!d;if(d&&c.each(function(){if(e(this).is(r.triggerEl))return u=!1,!1}),u){var _=c.first();r.all_targeting_actions(_,{}),r.element_selected(_)}s.intelli_css=l,r.reposition_overlays({con:"intelli"}),s.update_invalid_selector_msg("#no-element"==c.selector,l,d),s.get_nice_name(l,!0,s.pref.selname_code_synced)},sug_sel_mouseenter:function(t){s.intelli_css=t.hasClass("mt-el-quick-item")?t.data("code"):t.val(),e("#code-suggestions").find("li.in-focus").addClass("hover-elsewhere"),s.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"intelli",css:s.intelli_css,scroll:0})},sug_sel_mouseleave:function(){var t=e("#code-suggestions").find("li.in-focus");t.removeClass("hover-elsewhere"),s.intelli_css=t.find(".sug-sel").val(),s.iframe_functions_loaded()&&r.reposition_overlays({con:"intelli",scroll:0})},update_selector_suggestions:function(){t.startT(arguments),e("#code-suggestions").find("li.in-focus").hasClass("manual-edit")||s.get_nice_name(!1,!0,s.pref.selname_code_synced);var a="";for(var n in r.dom.sels["final"]){var i=r.dom.sels["final"][n],o='data-level="'+i.level+'"',l=i.isCombo?" combobox has-arrows":"",c=l?'data-appto="#refine-targeting-pane"':"",d=i.isCombo?" combobox-has-arrows ":"",u=l?'<span class="combo-arrow"></span>':"",_=l&&"x_plus"==i.refKey?"<sup>+</sup>":"",p=_?"+":"",f=l?'rel="'+i.refKey+'"':"";a+='<li class="code-suggestion" '+o+'><span class="tvr-input-wrap'+d+'"><input type="text" class="sug-sel'+l+'" value="'+t.regular_escape_quotes(i.code)+'" '+f+" "+c+" />"+u+'</span><span class="num-els-icon-wrap">'+s.num_els_icon(i.n,p)+"</span></li>"}s.redo_sug_sels(a),s.update_invalid_selector_msg(r.dom.invalidSel),t.endT(arguments,1)},redo_sug_sels:function(t,r){var a=e("#code-suggestions");r?a.removeClass("has-manual-edit").html(t):(a.find("li").not(".manual-edit").remove(),a.append(t));var n=a.find("li").first();n.addClass("in-focus");var i=e("#selector-naming").find(".wiz-name");i.find(".num-els-icon-wrap").html(s.num_els_icon(n.find(".num-els-icon").text())),a.find("input.sug-sel").add(e("#wizard-name")).each(function(){var t=e(this);t.get(0).scrollLeft=t.get(0).scrollWidth})},update_invalid_selector_msg:function(a,n,i){var o="",l="";for(var c in r.dom.sels.nothing){var d=r.dom.sels.nothing[c];l+="<li>"+d.code+"</li>"}a&&(n=n?n:r.dom.sels.nothing[0].code,o+='<li title="'+TvrLang.invalid_sel_long+'">'+n+"</li>"),e("#targets-nothing-sels").html(l),e("#targets-nothing-invalid").html(o),t.isDefined(i)&&i<1||r.dom.sels.nothing.length||a?(e("#targets-nothing").addClass("show"),s.stat.tvr.addClass("targets_nothing")):(e("#targets-nothing").removeClass("show"),s.stat.tvr.removeClass("targets_nothing")),a?e("#nothing-invalid").addClass("show"):e("#nothing-invalid").removeClass("show"),r.dom.sels.nothing.length?e("#nothing-valid").addClass("show"):e("#nothing-valid").removeClass("show")},num_els_icon:function(e,t){t=t?t:"";var r=e.toString(),a=1===e?tvrsprintf(TvrLang.n_els,r):tvrsprintf(TvrLang.n_els_plural,r+t),s=0===e?" el-targets-nothing":"";return'<span class="num-els-icon'+s+'" title="'+a+'">'+e+"</span>"},refresh_wizard_comp_css:function(){t.startT(arguments),s.filter_css_exceptions("intelli");var r=s.intelliCompProps=s.un_flatten_css(s.intelliCompProps),a=s.pgInFocusWiz;e("#comp-"+a).find("li.property-item").remove();var n="",i=1,o="";for(var l in r[a]){o=t.isOdd(i)?"row-odd":"row-even";var c=l.replace(/-/g," ");n+='<li class="property-item accordion-item '+o+'">',n+='<span class="comp-prop-label">'+c+":</span> ",n+='<span class="comp-prop-value">'+r[a][l]+"</span>",n+="</li>",++i}n+='<li class="property-item accordion-item bottom-gap"></li>',e("#comp-"+a).append(n),t.endT(arguments)},un_flatten_css:function(e){t.startT(arguments);var r=[];for(var a in s.cssProps){r[a]=[];for(var n in s.cssProps[a]){var i=s.cssProps[a][n];"background-img-full"==i||"extracted-gradient"==i||"google-font"==i||"text-shadow"==i||"box-shadow"==i||"background-image"==i&&"gradient"==a||(r[a][i]=e[i])}}return t.endT(arguments),r},wizard_new_or_update_selector:function(r,n,i){if(t.startT(arguments),s.pref.show_code_editor){if(!s.pref.buyer_validated&&a.count_editor_selectors()>15)return alert(TvrLang.trial_notice),!1;i=i?i:e("#code-suggestions").find("li.in-focus .sug-sel").val(),i&&a.insert_code_view_selector(i)}else{var o=e("#wizard_folder").val();if(!t.hasValue(o)||o==TvrLang.wizard_folder)return alert(TvrLang.wizard_folder_alert),!1;var l;i?l=s.get_nice_name(i,!1,s.pref.selname_code_synced):(l=e("#wizard-name").val(),i=e("#code-suggestions").find("li.in-focus .sug-sel").val());var c=t.convert_to_param(o);if(s.uiData[c]&&t.obj_length(s.uiData[c])>=25&&(o=s.ensure_unqique_name(o,!1,"folderWithSpace"),c=t.convert_to_param(o)),!t.isDomEl(e("#strk-"+c))&&!s.add_section(e("#new-section-add"),o))return!1;var d=s.get_meta(e("#strk-"+c),"section");if(n.indexOf("wizard-add")>=0){if(d.sectionM.find(".add-selector-form").find(".selector-name-input").val(l),d.sectionM.find(".add-selector-form").find(".selector-css-textarea").val(i),!s.add_selector(d.sectionM.find("span.add-selector")))return!1}else{var u=e("#"+s.selInFocusID),_=s.get_meta(u,"selector");if(_.sectionSlug!=c){if(!t.new_name_checks(l,"selector",e("#strk-"+c)))return!1;_.selectorM.detach().appendTo(d.sectionM.find("ul.selector-sub"));var p={item:_.selectorM};t.selector_received({},p),t.mirror_move_and_log({},p,1),s.expanded("quick_selector")&&s.close_quick_edit(),s.ajax_save_settings(),_=s.get_meta(e("#"+s.selInFocusID),"selector")}if((_.selectorSlug!=t.convert_to_param(l)||_.selectorM.find(".selector-css-textarea").val()!=i)&&(_.selectorM.find(".selector-name-input").val(l),_.selectorM.find(".selector-css-textarea").val(i),!s.action_modify_selector(_.selectorM.find("span.edit-selector"))))return!1}}s.feature_off(!1,"hover_inspect",{noSave:1}),t.endT(arguments)},load_visual_view:function(r){if(t.startT(arguments),s.stat.body.addClass("tvr-visual"),s.placeholderFrame&&(s.update_prog_indicator("plus",TvrLang.load_wp),window.frames.viframe.location=s.stat.iframe.attr("rel"),s.placeholderFrame=!1),s.pref.returned_ajax_msg&&!s.pref.returned_ajax_msg_seen)for(var n in s.pref.returned_ajax_msg)s.log(s.pref.returned_ajax_msg[parseInt(n)]);window.history.pushState&&parseInt(e("#clean-ui-url").attr("rel"))&&window.history.pushState(s.uiUrl,null,s.uiUrl),s.frameWidth=s.allDevicesWidth,s.default_to_tab("mq"),s.default_to_sel(),s.toolbar_adjusted(),s.toggle_enabled_buttons(),s.apply_rulers(),a.init_editor_deps(),s.pref.show_code_editor&&s.default_to_tab("css"),t.endT(arguments)},apply_rulers:function(){t.startT(arguments);var e,r=s.stat.front,a=[{angle:"h",cssPos:"left",dim:r.width(),labelPos:18,size:18,html:""},{angle:"v",cssPos:"top",dim:r.height(),size:18,html:""}];for(var n in a){e=a[n];for(var i=e.size,o="",l="";i<=e.dim;){var c=i-e.size;o=c%50==0?"tickLabel":c%10==0?"tickMajor":c%5==0?"tickMinor":"",l="tickLabel"==o&&"h"==e.angle?c:"tickLabel"==o&&"v"==e.angle?"<span>"+c+"</span>":"",e.html+='<div class="'+o+'" style="'+e.cssPos+":"+i+'px"',e.html+=">"+l+"</div>",i+=5}}var d='<div class="ruler ruler-stuff hRule">'+a[0].html+"</div>",u='<div class="ruler ruler-stuff vRule">'+a[1].html+"</div>",_='<div class="ruler ruler-stuff corner"></div>';r.prepend(_+u+d),t.endT(arguments,1)},toolbar_adjusted:function(a,n,i){t.startT(arguments);var o=s.toolbarHeight;s.toolbarHeight=s.stat.top.height(),s.frameHeight=s.stat.vis.height()-s.toolbarHeight,e("#v-frontend-wrap").css("height",s.frameHeight),s.iframe_functions_loaded()&&(a=t.isDefined(a)?a:o-s.toolbarHeight,r.maintain_cur_scroll(a,n,i)),t.endT(arguments,1)},toggle_enabled_buttons:function(){t.startT(arguments),s.totalSels<1&&(s.reset_global_vars(),e("#starter-message").removeClass("hidden"),e("#quick-nav").addClass("hidden"),s.expanded("quick_section")&&s.close_quick_edit(),e("#current-selector").text("")),s.totalSels>0&&(e("#starter-message").addClass("hidden"),e("#quick-nav").removeClass("hidden")),t.endT(arguments)},remember_page_viewed:function(){t.startT(arguments);var r=e("#previewurl").val(),a=(s.siteUrl,e("#viframe").contents().find("#iframe-url").attr("content")),n=decodeURIComponent(a),i=t.extract_url_path(n);t.hasValue(n)&&n!=r&&!s.placeholderFrame&&(e.get(s.ajaxUrl+"&mt_preview_url="+a+"&mt_preview_path="+i,function(){e("#previewStatus").text("iframe-success")}),e("#previewurl").val(n),e("#back-to-frontend").attr("href",n),t.in_array(i,TvrMT.data.prog.combo.custom_paths)===!1&&TvrMT.data.prog.combo.custom_paths.unshift(i)),t.endT(arguments)},remember_css_import_file:function(){t.startT(arguments);var r=e("#stylesheet_to_import").val();if(!t.hasValue(r))return!1;e.get(s.ajaxUrl+"&import_css_url="+encodeURI(r));var a=t.in_array(r,TvrMT.data.prog.combo.viewed_import_stylesheets);a!==!1&&TvrMT.data.prog.combo.viewed_import_stylesheets.splice(a,1),TvrMT.data.prog.combo.viewed_import_stylesheets.unshift(r),t.endT(arguments)},update_prev_next_sel_buttons:function(r){if(t.startT(arguments),!t.isDomEl(r))return e("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var a=s.get_meta(r,"selector"),n=s.selectorTrackerScan(a.sectionM,"prev","selector",a.selectorM),i=s.selectorTrackerScan(a.sectionM,"next","selector",a.selectorM);n?e("#vb-focus-prev").removeClass("disabled"):e("#vb-focus-prev").addClass("disabled"),i?e("#vb-focus-next").removeClass("disabled"):e("#vb-focus-next").addClass("disabled"),s.get_meta(r,"selector"),t.endT(arguments)},selectorTrackerScan:function(e,r,a,n){if(t.startT(arguments),"prev"==r){if("selector"==a){var i=n.prev("li.strk-sel");return t.hasValue(i.attr("id"))?(t.endT(arguments),i):(t.endT(arguments),s.selectorTrackerScan(e,r))}var o=e.prev("li.strk-sec");if(t.hasValue(o.attr("id"))){var l=o.find(".strk-sel").last();return t.hasValue(l.attr("id"))?(t.endT(arguments),l):(t.endT(arguments),s.selectorTrackerScan(o,r))}return t.endT(arguments),!1}if("next"==r){if("selector"==a){var c=n.next("li.strk-sel");return t.hasValue(c.attr("id"))?(t.endT(arguments),c):(t.endT(arguments),s.selectorTrackerScan(e,r))}var d=e.next("li.strk-sec");if(t.hasValue(d.attr("id"))){var u=d.find(".strk-sel").first();return t.hasValue(u.attr("id"))?(t.endT(arguments),u):(t.endT(arguments),s.selectorTrackerScan(d,r))}return t.endT(arguments),!1}},tvr_iterate_selectors_v:function(r,a){t.startT(arguments),r=r?r:e("#"+a),s.selInFocusID&&!s.prev&&(s.prev={pg:s.get_pg_focus_obj(),tabKey:s.get_mq_focus()});var n=s.get_meta(r,"selector");s.load_selector(n,TvrLang.load_before_iterating)||(s.selInFocusID&&s.prev&&(s.clean_pg(!1,s.prev.pg,s.prev.tabKey),s.prev=!1),e("#tvr-options").find("li.in-focus").removeClass("in-focus"),n.selector.addClass("in-focus"),s.update_global_vars(n),s.update_prev_next_sel_buttons(r),s.refresh_comp_css(),s.maybe_default_to_pg(n.selector),s.selector_check_values(n.selector,!1,!0,!0),s.selector_check_disabled(n),s.toolbar_adjusted(),s.startSel=!1),t.endT(arguments)},iframe_functions_loaded:function(){return r},maybe_default_to_pg:function(r){t.startT(arguments);var a=s.get_meta(r,"selector"),n=s.startSel?e("#last-pg-focus").attr("rel"):s.pgInFocus,i=n?".pg-icon-"+n:".pg-icon-font";s.pg_icon_pressed(a.selector.find(i)),t.endT(arguments)},quick_nav:function(r){if(t.startT(arguments),r.hasClass("disabled"))return!1;var a=s.get_meta(e("#"+s.selInFocusID),"selector");if("vb-focus-prev"==r.attr("id"))var n="prev";else var n="next";s.tvr_iterate_selectors_v(s.selectorTrackerScan(a.sectionM,n,"selector",a.selectorM))}};var s=TvrMT.TvrUi;t.set_vars(),a.set_vars(),s.init()});